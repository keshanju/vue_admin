(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02ab514a"],{"44eb":function(t,e,n){"use strict";n.d(e,"a",function(){return p});n("4453");var r=n("ee95"),a=n("eb12"),i=n("ba94"),o=n("5ee8"),s=n("4e86"),u=n("5bc3"),c=n("f322"),p=function(t){function e(){return Object(a["a"])(this,e),Object(o["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"GSettingListPager",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r,a,i,o=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,a="/staff/setting?account_token="+this.token+"&size="+n+"&page="+r+e,t.next=6,this.httpGet(a);case 6:return i=t.sent,t.abrupt("return",i);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"gsettingAdd",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/setting",t.next=3,this.httpPost(n,e);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"gsettingUpdate",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r="/staff/setting/"+e,t.next=3,this.httpPut(r,n);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getGSettingModel",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/setting/"+e+"?account_token="+this.token,t.next=3,this.httpGet(n);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(c["a"])},8927:function(t,e,n){},"9ed6":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"login-wrap"},[n("div",{staticClass:"login-window"},[n("DxForm",{ref:t.dxFormKey1})],1)])])},a=[],i=(n("4453"),n("ee95")),o=n("eb12"),s=n("ba94"),u=n("5ee8"),c=n("4e86"),p=n("5bc3"),h=n("3a61"),l=n("b2e6"),d=n("74a9"),f=n("1639"),g=n("be44"),m=n("f322"),b=function(t){function e(){return Object(o["a"])(this,e),Object(u["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(p["a"])(e,t),Object(s["a"])(e,[{key:"getList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",e="/tools/dictionary",t.next=4,this.httpGet(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}]),e}(m["a"]),x=n("4c5d"),v=n("84ec"),y=n("4b0b"),w=n("9b13"),k=n("019a"),O=n.n(k),j=n("44eb"),C=function(t){function e(){return Object(o["a"])(this,e),Object(u["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(p["a"])(e,t),Object(s["a"])(e,[{key:"getCountryCodeList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.httpGet("/tools/auth_country");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}]),e}(m["a"]),R=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(u["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.dxFormKey1="dxForm_Key_1",t.formLoginData={password:""},t.dxFormDataReset1={password:""},t.staffAPI=new g["a"],t.dicApi=new b,t.imgBase64="",t}return Object(p["a"])(e,t),Object(s["a"])(e,[{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.initComponent(),this.onCaptchaClickHandler({}),this.dxForm1.registerKeyHandler("enter",function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onClickHandler();case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"initComponent",value:function(){var t=this;this.dxForm1=this.getDxInstanceByKey(this.dxFormKey1);var e=[{itemType:"group",caption:x["a"].siteName+" - "+v["a"].lang_login_login_button,items:[{label:{text:v["a"].lang_login_username},dataField:"username",editorType:"dxTextBox",editorOptions:{width:"90%"},validationRules:[y["a"].getRequired("用户名不能为空!")]},{label:{text:v["a"].lang_login_password},dataField:"password",editorType:"dxTextBox",editorOptions:{mode:"password",width:"90%"},validationRules:[y["a"].getRequired("密码不能为空!")]},{label:{text:v["a"].lang_login_captcha},dataField:"captcha",editorType:"dxTextBox",editorOptions:{width:"90%",onKeyUp:function(e){13==e.keyCode&&t.onClickHandler()}},validationRules:[y["a"].getRequired("验证码不能为空!")]},{label:{text:v["a"].lang_login_captcha_key,horizontalAlignment:"center"},dataField:"captcha_key",editorType:"dxGallery",editorOptions:{height:40,width:100,showIndicator:!1,onItemClick:this.onCaptchaClickHandler}},{name:"btnLogin",itemType:"button",horizontalAlignment:"center",buttonOptions:{text:v["a"].lang_login_login_button,type:"success",useSubmitBehavior:!0,onClick:this.onClickHandler,width:"100%"}}]}],n={formData:this.formLoginData,items:e};this.dxForm1.option(n),this.dxGallery1=this.dxForm1.getEditor("captcha_key")}},{key:"onClickHandler",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,r,a,i,o,s,u,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.validateForm(this.dxForm1)){t.next=2;break}return t.abrupt("return");case 2:return e=$.extend(!0,{},this.formLoginData),e.password=O()(this.formLoginData.password),t.next=6,this.staffAPI.loginCheck(e);case 6:if(n=t.sent,n.code!==w["a"].OK){t.next=26;break}return x["a"].setStaffLoginInfo(n),t.next=11,this.dicApi.getList();case 11:return r=t.sent,x["a"].setDictionary(r),t.next=15,(new j["a"]).GSettingListPager("",2e3,1);case 15:return a=t.sent,x["a"].SetSettings(a.data.list),t.next=19,(new C).getCountryCodeList();case 19:for(s in i=t.sent,o=[],i.data.list_country)u=i.data.list_country[s],o.push({name:s,id:u});x["a"].setCountryCode(o),this.redirect("/dashboard"),t.next=28;break;case 26:c=this.errorCodeMsg(n.code,n.msg),c&&this.onCaptchaClickHandler({});case 28:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"onCaptchaClickHandler",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.staffAPI.getCaptcha();case 2:n=t.sent,this.formLoginData.captcha_key=n.data.key,this.dxGallery1.option({dataSource:[n.data.img]});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"loginInit",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.staffAPI.getCaptcha();case 2:e=t.sent,this.formLoginData.captcha_key=e.data.key,this.imgBase64=e.data.img;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"validate",value:function(t){var e=t.validationGroup.validate();e.isValid&&t.validationGroup.reset()}}]),e}(f["a"]);R=h["a"]([Object(l["a"])({components:{DxForm:d["DxForm"],DxTextBox:d["DxTextBox"],DxButton:d["DxButton"],DxValidationGroup:d["DxValidationGroup"],DxPopup:d["DxPopup"]}})],R);var _=R,D=_,F=D,G=(n("b22d"),n("17cc")),L=Object(G["a"])(F,r,a,!1,null,"ebd4f3ba",null);e["default"]=L.exports},b22d:function(t,e,n){"use strict";var r=n("8927"),a=n.n(r);a.a}}]);