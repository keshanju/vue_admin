(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05f7116c"],{"28dc":function(e,t,r){"use strict";r.d(t,"a",function(){return p});r("4453");var a=r("ee95"),n=r("eb12"),i=r("ba94"),s=r("5ee8"),o=r("4e86"),u=r("5bc3"),c=r("f322"),p=function(e){function t(){return Object(n["a"])(this,t),Object(s["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"getListPager",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",r=s.length>1&&void 0!==s[1]?s[1]:15,a=s.length>2&&void 0!==s[2]?s[2]:1,n="/staff/member/refund/approval?account_token="+this.token+"&size="+r+"&page="+a+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:"",t="/staff/member/refund/approval/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/refund/approval",a=t,e.next=4,this.httpPost(r,a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/member/refund/approval/"+t,n=r,e.next=4,this.httpPut(a,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/refund/approval/"+t,a="account_token="+this.token+"&ids="+t,e.next=4,this.httpDelete(r+"?"+a);case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/refund/approval/"+t,a="account_token="+this.token,e.next=4,this.httpGet(r+"?"+a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModelRefundInfo",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/"+t+"/refund",a="account_token="+this.token,e.next=4,this.httpGet(r+"?"+a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setAddRefundInfo",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/member/"+t+"/refund",n=r,e.next=4,this.httpPost(a,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"setUpdateApproval",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/member/refund/approval/"+t,n=r,e.next=4,this.httpPostJson(a,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()}]),t}(c["a"])},f72c:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("DxForm",{ref:e.dxFormKey1})],1)])},n=[],i=(r("4453"),r("ee95")),s=r("eb12"),o=r("ba94"),u=r("5ee8"),c=r("4e86"),p=r("5bc3"),d=r("3a61"),l=r("b2e6"),h=r("74a9"),m=r("a60a"),f=r.n(m),v=r("1639"),x=r("4c5d"),b=r("28dc"),g=r("9b13"),k=r("4b0b"),D=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(u["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.dxFormKey1="dxFormKey1",e.dxFormData1={id:0},e.dxFormDataReset1={},e.approvalApi=new b["a"],e.stateSelected=0,e}return Object(p["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$parent.content_title="退款审核",!(this.ID>g["a"].zero)){e.next=4;break}return e.next=4,this.getDataModel(this.ID);case 4:this.dxFormDataReset1=f.a.extend(!0,{},this.dxFormData1),this.initControls();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initControls",value:function(){var e=this;this.dxForm1=this.getDxInstanceByKey(this.dxFormKey1);var t=[];0==this.dxFormData1.state?t=x["a"].getDictonary().data.approval_state.filter(function(e,t){return 1==e.id||-1==e.id}):1==this.dxFormData1.state||-1==this.dxFormData1.state?t=x["a"].getDictonary().data.approval_state.filter(function(e,t){return 2==e.id||-2==e.id}):2!=this.dxFormData1.state&&-3!=this.dxFormData1.state||(t=x["a"].getDictonary().data.approval_state.filter(function(e,t){return 3==e.id}));var r={dataField:"state",label:{text:"审核状态"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择审核状态",displayExpr:"name",valueExpr:"id",dataSource:t,onValueChanged:function(t){e.stateSelected=t.value}},validationRules:[k["a"].getRequired("审核状态不能为空!")]},a={label:{text:"当前状态"},template:function(t,r){f()("<div></div>").html(x["a"].getDicText(x["a"].getDictonary().data.approval_state,e.dxFormDataReset1.state)).appendTo(r)}},n={dataField:"first_approval_desc",label:{text:"初步审核备注"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入初步审核备注，至少5个字符",height:150},validationRules:[k["a"].getRequired("初步审核备注不能为空!"),{type:"stringLength",min:5,max:200,message:"备注必须在5~200之间!"}]},i={dataField:"first_approval_desc",label:{text:"初步审核备注"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入初步审核备注，至少5个字符",height:150},template:function(t,r){f()("<div></div>").html(e.dxFormDataReset1.first_approval_desc).appendTo(r)}},s={dataField:"confirm_approval_desc",label:{text:"确认审核备注"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入确认审核备注，至少5个字符",height:150},validationRules:[k["a"].getRequired("确认审核备注不能为空!"),{type:"stringLength",min:5,max:200,message:"备注必须在5~200之间!"}]},o={dataField:"confirm_approval_desc",label:{text:"确认审核备注"},template:function(t,r){f()("<div></div>").html(e.dxFormDataReset1.confirm_approval_desc).appendTo(r)}},u={dataField:"refund_desc",label:{text:"退款审核备注"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入退款审核备注，至少5个字符",height:150},validationRules:[k["a"].getRequired("退款审核备注不能为空!"),{type:"stringLength",min:5,max:200,message:"备注必须在5~200之间!"}]},c={dataField:"refund_desc",label:{text:"退款审核备注"},template:function(t,r){f()("<div></div>").html(e.dxFormDataReset1.refund_desc).appendTo(r)}},p=!1,d=[];switch(this.dxFormDataReset1.state){case 0:d.push(a,r,n);break;case-1:case 1:d.push(a,r,i,s);break;case-2:case 2:d.push(a,r,i,o,u);break;case 3:d.push(a,i,o,c),p=!0;break}var l=[{itemType:"group",items:d},{itemType:"group",colCount:3,items:[{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:"审核",type:"success",useSubmitBehavior:!0,disabled:p,onClick:this.onClickDoHandler}},{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:"重置",type:"normal",visible:!p,onClick:this.onResetHandler}},{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:"返回",type:"normal",onClick:this.onClickBackHandler}}]}],h={formData:this.dxFormData1,items:l,width:500,validationGroup:"customerData"};this.dxForm1.option(h)}},{key:"onResetHandler",value:function(e){this.dxFormData1=f.a.extend(!0,{},this.dxFormDataReset1),this.dxForm1.option("formData",this.dxFormData1)}},{key:"getDataModel",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.approvalApi.getModel(t);case 2:r=e.sent,r.code!=g["a"].zero&&this.alert(r.msg).then(function(){a.redirect("/user/list")}),this.dxFormData1=r.data;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onClickDoHandler",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r,a,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.validateForm(this.dxForm1)){e.next=3;break}return e.abrupt("return");case 3:if(0!=this.dxFormDataReset1.state){e.next=8;break}if(1==this.stateSelected||-1==this.stateSelected){e.next=8;break}return e.next=7,this.alert("只能选择初步审核通过/初步审核不通过");case 7:return e.abrupt("return");case 8:if(1!=this.dxFormDataReset1.state&&-1!=this.dxFormDataReset1.state){e.next=13;break}if(2==this.stateSelected||-2==this.stateSelected){e.next=13;break}return e.next=12,this.alert("只能选择确认审核通过/确认审核不通过");case 12:return e.abrupt("return");case 13:if(2!=this.dxFormDataReset1.state&&-2!=this.dxFormDataReset1.state){e.next=18;break}if(3==this.stateSelected){e.next=18;break}return e.next=17,this.alert("只能选择已退款");case 17:return e.abrupt("return");case 18:r="",e.t0=this.dxFormDataReset1.state,e.next=0===e.t0?22:1===e.t0?24:-1===e.t0?24:2===e.t0?26:-2===e.t0?26:28;break;case 22:return r=this.dxFormDataReset1.first_approval_desc,e.abrupt("break",28);case 24:return r=this.dxFormData1.confirm_approval_desc,e.abrupt("break",28);case 26:return r=this.dxFormData1.refund_desc,e.abrupt("break",28);case 28:return this.dxFormData1.account_token=this.token,e.next=31,this.approvalApi.setUpdateApproval(this.ID,{account_token:this.dxFormData1.account_token,approval_id:this.ID,approval_state:this.dxFormData1.state,approval_desc:r});case 31:a=e.sent,a.code==g["a"].OK||a.code==g["a"].isSame||a.code==g["a"].isSameSaveData?this.toast(function(){n.redirect("/user/approval/list")}):this.errorCodeMsg(a.code,a.msg),e.next=38;break;case 35:e.prev=35,e.t1=e["catch"](0),this.error(e.t1);case 38:case"end":return e.stop()}},e,this,[[0,35]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onClickBackHandler",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.redirect("/user/approval/list");case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(v["a"]);D=d["a"]([Object(l["a"])({components:{DxDataGrid:h["DxDataGrid"],DxForm:h["DxForm"]}})],D);var y=D,R=y,F=R,w=r("17cc"),_=Object(w["a"])(F,a,n,!1,null,null,null);t["default"]=_.exports}}]);