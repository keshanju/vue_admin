(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-171ecc26"],{"3ebb":function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o});r("5f33"),r("f91a");var a,n=r("eb12"),i=r("ba94");(function(e){e[e["Year"]=0]="Year",e[e["Month"]=1]="Month",e[e["Date"]=2]="Date",e[e["Week"]=3]="Week",e[e["Hour"]=4]="Hour",e[e["Minute"]=5]="Minute",e[e["Second"]=6]="Second",e[e["Milliscond"]=7]="Milliscond"})(a||(a={}));var o=function(){function e(){Object(n["a"])(this,e)}return Object(i["a"])(e,[{key:"compareDate",value:function(e,t){}}],[{key:"parserDate",value:function(e){var t=Date.parse(e);return isNaN(t)?new Date:new Date(Date.parse(e.replace(/-/g,"/")))}},{key:"getNow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-MM-dd HH:mm:ss",t=new Date,r={"M+":t.getMonth()+1,"d+":t.getDate(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return e}},{key:"convertDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",r={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return t}},{key:"AddTime",value:function(e,t,r){var n=this.parserDate(e);switch(t){case a.Milliscond:n.setMilliseconds(n.getMilliseconds()+r);break;case a.Date:n.setDate(n.getDate()+r);break;case a.Month:n.setMonth(n.getMonth()+r);break;case a.Week:n.setDate(n.getDate()+7*r);break}return this.convertDate(n)}},{key:"TimeIntegrate",value:function(e){var t=Math.floor(e/864e5),r=e%864e5,a=Math.floor(r/36e5),n=r%36e5,i=Math.floor(n/6e4),o=n%6e4,s=Math.round(o/1e3),u="";return t>0&&(u+=" "+t+"天 "),a>0&&(u+=" "+a+"小时 "),i>0&&(u+=" "+i+"分钟 "),s>0&&(u+=" "+s+"秒 "),u}},{key:"TimeIntegrate2",value:function(e){var t=Math.floor(e/864e5),r=e%864e5,a=Math.floor(r/36e5),n=r%36e5,i=Math.floor(n/6e4),o=n%6e4,s=(Math.round(o/1e3),"");return t>0&&(a+=24*t),a>0&&(s+=" "+a+"小时 "),i>0&&(s+=" "+i+"分钟 "),s}}]),e}()},5397:function(e,t,r){"use strict";r.d(t,"a",function(){return c});r("4453");var a=r("ee95"),n=r("eb12"),i=r("ba94"),o=r("5ee8"),s=r("4e86"),u=r("5bc3"),l=r("f322"),c=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"getListPager",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",r=o.length>1&&void 0!==o[1]?o[1]:15,a=o.length>2&&void 0!==o[2]?o[2]:1,n="/staff/version?account_token="+this.token+"&size="+r+"&page="+a+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:"",t="/staff/version?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/version",a=t,e.next=4,this.httpPost(r,a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/version/"+t,n=r,e.next=4,this.httpPut(a,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/version/"+t,a="account_token="+this.token+"&ids="+t,e.next=4,this.httpDelete(r+"?"+a);case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/version/"+t,a="account_token="+this.token,e.next=4,this.httpGet(r+"?"+a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(l["a"])},6484:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("DxForm",{ref:e.dxFormKey1})],1)},n=[],i=(r("4453"),r("ee95")),o=r("eb12"),s=r("ba94"),u=r("5ee8"),l=r("4e86"),c=r("5bc3"),d=r("3a61"),p=r("b2e6"),h=r("74a9"),g=r("a60a"),m=r.n(g),v=r("1639"),f=r("5397"),x=r("4c5d"),b=r("9b13"),y=r("4b0b"),_=r("3ebb"),k=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(u["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.dxFormKey1="dxForm_Key_1",e.dxFormData1={id:0,is_enterprise:0},e.dxFormDataReset1={},e.versionAPI=new f["a"],e}return Object(c["a"])(t,e),Object(s["a"])(t,[{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$parent.content_title="版本添加",this.initComponents(),!(this.ID>b["a"].zero)){e.next=5;break}return e.next=5,this.getDataModel(this.ID);case 5:this.dxFormDataReset1=m.a.extend(!0,{},this.dxFormData1);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initComponents",value:function(){var e=this;this.dxForm1=this.getDxInstanceByKey(this.dxFormKey1);var t=[{itemType:"group",items:[{dataField:"app_platform_type",label:{text:"发布平台"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择发布平台",displayExpr:"name",valueExpr:"id",dataSource:x["a"].getDictonary().data.app_platform_type,onValueChanged:function(t){var r=t.value;switch(r){case 1:e.dxForm1.getEditor("not_upgrade_fail_url").option({value:x["a"].GetSettingsVal("Ver_update_fail_url_pc")}),e.dxForm1.getEditor("base_remote_url").option({value:x["a"].GetSettingsVal("Ver_base_url_pc")});break;case 2:e.dxForm1.getEditor("not_upgrade_fail_url").option({value:x["a"].GetSettingsVal("Ver_update_fail_url_and")}),e.dxForm1.getEditor("base_remote_url").option({value:x["a"].GetSettingsVal("Ver_base_url_and")});break;case 3:e.dxForm1.getEditor("not_upgrade_fail_url").option({value:x["a"].GetSettingsVal("Ver_update_fail_url_ios")}),e.dxForm1.getEditor("base_remote_url").option({value:x["a"].GetSettingsVal("Ver_base_url_ios")});break;case 4:e.dxForm1.getEditor("not_upgrade_fail_url").option({value:x["a"].GetSettingsVal("Ver_update_fail_url_mac")}),e.dxForm1.getEditor("base_remote_url").option({value:x["a"].GetSettingsVal("Ver_base_url_mac")});break}}},validationRules:[y["a"].getRequired("发布平台不能为空!")]},{dataField:"lang_type",label:{text:"语言平台"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择语言平台",displayExpr:"name",valueExpr:"id",dataSource:x["a"].getDictonary().data.user_lang},validationRules:[y["a"].getRequired("语言平台不能为空!")]},{dataField:"is_enterprise",label:{text:"是否企业版"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择是否为企业版",displayExpr:"name",valueExpr:"id",dataSource:x["a"].getDictonary().data.flag},validationRules:[y["a"].getRequired("请选择是否为企业版!")]},{dataField:"buildnum",label:{text:"编译版本"},editorOptions:{placeholder:"编译版本格式: yyyyMMddHHmmss",value:_["b"].getNow("yyyyMMddHHmmss")},validationRules:[y["a"].getRequired("编译版本不能为空!")]},{dataField:"gamelib_version",label:{text:"编译库版本"},editorOptions:{value:_["b"].getNow("yyyyMMddHHmmss"),readOnly:!0,disabled:!0},validationRules:[y["a"].getRequired("编译版本不能为空!")]},{dataField:"upgrade_remark",label:{text:"更新说明"},editorType:"dxTextArea",editorOptions:{placeholder:"更新说明信息",height:100},validationRules:[y["a"].getRequired("更新说明不能为空!")]},{dataField:"min_upgrade_app_version",label:{text:"最小可升级的版本"},editorOptions:{placeholder:"最小可升级的版本,格式为: 1.0.0.2"},validationRules:[y["a"].getRequired("最小可升级的版本不能为空!")]},{dataField:"not_upgrade_fail_url",label:{text:"不能升级的版本打开网页"},editorOptions:{placeholder:"格式为: http://xxx"},validationRules:[y["a"].getRequired("不能升级的版本打开页面不能为空!"),y["a"].getHttp("不能升级的版本打开网页不正确!")]},{dataField:"app_version",label:{text:"主程序版本"},editorOptions:{placeholder:"格式为: 1.0.0.1"},validationRules:[y["a"].getRequired("主程序不能为空!")]},{dataField:"base_remote_url",label:{text:"基本网址路径"},editorOptions:{placeholder:"格式为: http://xxx"},validationRules:[y["a"].getRequired("基本路径不能为空!"),y["a"].getHttp("基本网址路径不正确!")]}]},{itemType:"group",colCount:3,items:[{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:this.ID>b["a"].zero?"更新":"添加",type:"success",useSubmitBehavior:!0,onClick:this.onClickDoHandler}},{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:"重置",type:"normal",onClick:this.onResetHandler}},{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:"返回",type:"normal",onClick:this.onClickBackHandler}}]}],r={formData:this.dxFormData1,items:t,width:500,validationGroup:"customerData"};this.dxForm1.option(r)}},{key:"onResetHandler",value:function(e){this.dxFormData1=m.a.extend(!0,{},this.dxFormDataReset1),this.dxForm1.option("formData",this.dxFormData1)}},{key:"getDataModel",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.versionAPI.getModel(t);case 2:r=e.sent,this.dxFormData1=r.data,this.dxForm1.option({formData:this.dxFormData1});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onClickDoHandler",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r,a,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.validateForm(this.dxForm1)){e.next=3;break}return e.abrupt("return");case 3:if(this.dxFormData1.account_token=this.token,r=this.joinFormParams(this.dxFormData1),this.dxFormData1.id!=b["a"].zero){e.next=11;break}return e.next=8,this.versionAPI.setAdd(r);case 8:a=e.sent,e.next=14;break;case 11:return e.next=13,this.versionAPI.setUpdate(this.ID,r);case 13:a=e.sent;case 14:a.code==b["a"].OK||a.code==b["a"].isSame||a.code==b["a"].isSameSaveData?this.toast(function(){n.redirect("/system/version/list")}):this.errorCodeMsg(a.code,a.msg),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](0),this.error(e.t0);case 20:case"end":return e.stop()}},e,this,[[0,17]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onClickBackHandler",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.redirect("/system/version/list");case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(v["a"]);k=d["a"]([Object(p["a"])({components:{DxDataGrid:h["DxDataGrid"],DxForm:h["DxForm"],DxTreeView:h["DxTreeView"]}})],k);var D=k,R=D,w=R,F=r("17cc"),M=Object(F["a"])(w,a,n,!1,null,null,null);t["default"]=M.exports}}]);