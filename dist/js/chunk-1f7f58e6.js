(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f7f58e6"],{9995:function(e,t,a){"use strict";a.d(t,"a",function(){return d});a("4453");var r=a("ee95"),n=a("eb12"),i=a("ba94"),o=a("5ee8"),c=a("4e86"),s=a("5bc3"),u=a("f322"),d=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(s["a"])(t,e),Object(i["a"])(t,[{key:"getListPager",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",a=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,n="/staff/cms/project?account_token="+this.token+"&size="+a+"&page="+r+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",t="/staff/cms/project/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/cms/project",r=t,e.next=4,this.httpPost(a,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/cms/project/"+t,n=a,e.next=4,this.httpPutJson(r,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/cms/project/"+t,e.next=3,this.httpDelete(a+"?account_token="+this.token);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/cms/project/"+t,r="account_token="+this.token,e.next=4,this.httpGet(a+"?"+r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(u["a"])},d99c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DxDataGrid",{ref:e.dxDataGridKey1})],1)},n=[],i=(a("b06f"),a("4453"),a("ee95")),o=a("eb12"),c=a("ba94"),s=a("5ee8"),u=a("4e86"),d=a("5bc3"),l=a("3a61"),p=a("b2e6"),h=a("a60a"),f=a.n(h),m=a("74a9"),v=a("1639"),b=a("9995"),g=a("84ec"),x=a("4b0b"),w=a("9b13"),k=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(s["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.dxDataGridKey1="dxDataGrid_Key_1",e.projectApi=new b["a"],e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$parent.content_title="项目管理",this.initComponent(),this.getDataList();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initComponent",value:function(){this.dxDataGrid1=this.getDxInstanceByKey(this.dxDataGridKey1);var e=[{dataField:"id",caption:"编号",width:80},{dataField:"title",caption:"名称",width:140},{dataField:"domain",caption:"域名",width:180},{dataField:"keyword",caption:"关键字",width:150},{dataField:"powerby",caption:"版权信息",width:200},{dataField:"dirname",caption:"生成目录名",width:100},{dataField:"beian",caption:"备案号",width:160},{dataField:"create_staff_name",caption:"创建人",width:160},{dataField:"create_time",caption:"创建时间",width:160},{dataField:"change_staff_name",caption:"修改人",width:160},{dataField:"change_time",caption:"修改时间",width:160},{fixed:!0,fixedPosition:"right",dataField:"id",alignment:"center",caption:g["a"].Operate,width:200,cellTemplate:this.cellEdit}],t=this.getDataGridOption({onToolbarPreparing:this.onToolbarPreparingHandler,columns:e});this.dxDataGrid1.option(t)}},{key:"cellEdit",value:function(e,t){var a=this,r=this.getCreateLink("删除",function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.confirm("是否确定删除?");case 2:n=e.sent,n&&a.setDelete(t.value);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n=f()("<a href='#' data="+t.value+"> 编辑 </a>");n.bind("click",function(e){var t=f()(e.target).attr("data");a.editForm(Number(t))});var o=this.getCreateLink("频道",function(e){a.redirect("/cms/channel/"+t.value)});f()("<div>").append(o).append(" | ").append(n).append(" | ").append(r).appendTo(e)}},{key:"getDataList",value:function(){var e=this,t=this.getDataGridPager(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(a,r,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.projectApi.getListPager(a,r,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,a,r){return t.apply(this,arguments)}}());this.dxDataGrid1.option({remoteOperations:!0,dataSource:t})}},{key:"onToolbarPreparingHandler",value:function(e){var t=this,a=(e.component,e.toolbarOptions.items);a.push({location:"before",widget:"dxButton",options:{text:g["a"].Add,icon:"add",onClick:this.onAddHandler}}),a.push({location:"before",widget:"dxButton",options:{icon:"refresh",text:"刷新",onClick:this.onRefreshHandler}}),this.createSearchToolbars(a,this.dxDataGrid1.option("columns"),function(){t.getDataList()})}},{key:"setDelete",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.projectApi.setDelete(t);case 3:if(a=e.sent,a.code!=w["a"].OK&&a.code!=w["a"].isSame&&a.code!=w["a"].isSameSaveData){e.next=8;break}this.toast(function(){r.dxDataGrid1.refresh()}),e.next=10;break;case 8:return this.errorCodeMsg(a.code,a.msg),e.abrupt("return",!1);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e["catch"](0),this.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"editForm",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.projectApi.getModel(t);case 2:a=e.sent,this.createForm(t,a.data);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"createForm",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.createFormItems([{dataField:"title",label:{text:"名称"},editorOptions:{placeholder:"请输入项目名称.例：奇妙网游加速器"},validationRules:[x["a"].getRequired("名称不能为空!")]},{dataField:"dirname",label:{text:"生成目录名"},editorOptions:{placeholder:"请输入项目生成目录.例：qimiao"},validationRules:[x["a"].getRequired("生成目录不能为空!")]},this.createUploadFileFormItem(function(e){a.logo=e[0].src},{dataField:"logo",label:{text:"LOGO地址"},validationRules:[x["a"].getRequired("LOGO地址不能为空!")]},{name:"filename",uploadUrl:this.uploadApi.getUploadNormalPath("images")}),this.createUploadFileFormItem(function(e){a.ico=e[0].src},{dataField:"ico",label:{text:"图标"},validationRules:[x["a"].getRequired("图标地址不能为空!")]},{name:"filename",uploadUrl:this.uploadApi.getUploadNormalPath("images")}),{dataField:"domain",label:{text:"域名"},editorOptions:{placeholder:"请输入域名信息.例：www.qimiao.com"},validationRules:[x["a"].getRequired("域名不能为空!")]},{dataField:"powerby",label:{text:"版权信息"},editorType:"dxTextArea",editorOptions:{height:80,placeholder:"请输入版权信息.例：奇妙科技有限公司版权所有 并保留所有权利"},validationRules:[x["a"].getRequired("版权信息不能为空!")]},{dataField:"keyword",label:{text:"关键词"},editorOptions:{placeholder:"请输入关键词信息.例：免费加速器,网游加速器,游戏加速器,加速器"},validationRules:[x["a"].getRequired("关键词不能为空!")]},{dataField:"description",label:{text:"描述"},editorType:"dxTextArea",editorOptions:{height:80,placeholder:"请输入描述信息.例：奇妙加速器是专业端游、外服国服网游加速器，致力解决玩家在网络游戏中掉线、延迟、卡顿等网络问题，同时也是手游加速器首选app"},validationRules:[x["a"].getRequired("描述不能为空!")]},{dataField:"beian",label:{text:"备案信息"},editorOptions:{placeholder:"请输入备案信息. 例：鄂ICP备18012317号-2"},validationRules:[x["a"].getRequired("备案信息不能为空!")]},{dataField:"content",label:{text:"内容"},editorType:"dxTextArea",editorOptions:{height:150,placeholder:"请输入内容信息."},validationRules:[x["a"].getRequired("内容不能为空!")]}]);this.createPopForm({title:t>0?"编辑项目":"创建项目",width:800},{formData:a,items:r},{},function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(a,r){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=a.option("formData"),n.account_token=e.token,null!=n.id&&0!=n.id){t.next=9;break}return t.next=6,e.projectApi.setAdd(n);case 6:i=t.sent,t.next=12;break;case 9:return t.next=11,e.projectApi.setUpdate(n.id,n);case 11:i=t.sent;case 12:if(i.code!=w["a"].OK&&i.code!=w["a"].isSame&&i.code!=w["a"].isSameSaveData){t.next=16;break}e.toast(function(){e.dxDataGrid1.refresh()}),t.next=18;break;case 16:return e.errorCodeMsg(i.code,i.msg),t.abrupt("return",!1);case 18:t.next=24;break;case 20:return t.prev=20,t.t0=t["catch"](0),e.error(t.t0),t.abrupt("return",!1);case 24:return t.abrupt("return",!0);case 25:case"end":return t.stop()}},t,null,[[0,20]])}));return function(e,a){return t.apply(this,arguments)}}())}},{key:"onAddHandler",value:function(e){this.createForm()}},{key:"onRefreshHandler",value:function(e){this.dxDataGrid1.refresh()}}]),t}(v["a"]);k=l["a"]([Object(p["a"])({components:{DxDataGrid:m["DxDataGrid"]}})],k);var R=k,y=R,O=y,j=a("17cc"),F=Object(j["a"])(O,r,n,!1,null,null,null);t["default"]=F.exports}}]);