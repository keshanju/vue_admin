(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24fa9096"],{3787:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a("4453");var r=a("ee95"),n=a("eb12"),i=a("ba94"),o=a("5ee8"),s=a("4e86"),c=a("5bc3"),u=a("f322"),l=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),Object(i["a"])(t,[{key:"UserListPager",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",a=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,n="/staff/member?account_token="+this.token+"&size="+a+"&page="+r+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",t="/staff/group/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"userAdd",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/member",e.next=3,this.httpPost(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"userUpdate",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/"+t,e.next=3,this.httpPut(r,a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"userRePasswd",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/"+t+"/password",e.next=3,this.httpPut(r,a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getUserModel",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/member/"+t+"?account_token="+this.token,e.next=3,this.httpGet(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"userUpdatePause",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/member/branch/"+t+"/pause/"+a,e.next=3,this.httpPostJson(n,r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}},e,this)}));function t(t,a,r){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/"+t,n="account_token=".concat(this.token,"&delete_explain=").concat(a),e.next=4,this.httpDelete(r+"?"+n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getUserRefListPager",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s.length>2&&void 0!==s[2]?s[2]:"",r=s.length>3&&void 0!==s[3]?s[3]:15,n=s.length>4&&void 0!==s[4]?s[4]:1,i="/staff/member/refer?account_token="+this.token+"&size="+r+"&page="+n+"&member_id=".concat(t,"&refer_member_id=").concat(a),e.next=7,this.httpGet(i);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getUserOpLogsListPager",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i,o,s,c=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:"",n=c.length>3&&void 0!==c[3]?c[3]:15,i=c.length>4&&void 0!==c[4]?c[4]:1,o="/staff/member/".concat(t,"/operate/log/").concat(a,"?account_token=").concat(this.token,"&page=").concat(i,"&size=").concat(n).concat(r),e.next=6,this.httpGet(o);case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()}]),t}(u["a"])},3903:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("dxUserSearchForm",{attrs:{is_search_user:!0},on:{onSearch:e.onSearch}}),a("br"),a("DxDataGrid",{ref:e.dxDataGridKey1}),a("MyMaster",{ref:"master_user",attrs:{visible:e.master_dialog.visible},on:{onHide:e.master_dialog.onHide}})],1)},n=[],i=(a("48fb"),a("4453"),a("ee95")),o=a("eb12"),s=a("ba94"),c=a("5ee8"),u=a("4e86"),l=a("5bc3"),d=a("3a61"),p=a("b2e6"),h=a("a60a"),m=a.n(h),f=a("74a9"),v=a("e09e"),g=a.n(v),b=a("1639"),_=a("3787"),y=a("4c5d"),x=a("84ec"),w=a("3ebb"),k=a("4b0b"),D=a("f322"),F=function(e){function t(){return Object(o["a"])(this,t),Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"getListPager",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"",r=s.length>2&&void 0!==s[2]?s[2]:15,n=s.length>3&&void 0!==s[3]?s[3]:1,i="/staff/member/login/log/"+t+"?account_token="+this.token+"&size="+r+"&page="+n+a,e.next=6,this.httpGet(i);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",t="/staff/layouts/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/layouts",r=t,e.next=4,this.httpPost(a,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/layouts/"+t,n=a,e.next=4,this.httpPut(r,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/layouts/"+t,r="account_token="+this.token+"&ids="+t,e.next=4,this.httpDelete(a+"?"+r);case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/layouts/"+t,r="account_token="+this.token,e.next=4,this.httpGet(a+"?"+r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(D["a"]),O=function(e){function t(){return Object(o["a"])(this,t),Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"getListPager",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"",r=s.length>2&&void 0!==s[2]?s[2]:15,n=s.length>3&&void 0!==s[3]?s[3]:1,i="/staff/member/branch/"+t+"/duration?account_token="+this.token+"&size="+r+"&page="+n+a,e.next=6,this.httpGet(i);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",t="/staff/layouts/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/layouts",r=t,e.next=4,this.httpPost(a,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/layouts/"+t,n=a,e.next=4,this.httpPut(r,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/layouts/"+t,r="account_token="+this.token+"&ids="+t,e.next=4,this.httpDelete(a+"?"+r);case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/layouts/"+t,r="account_token="+this.token,e.next=4,this.httpGet(a+"?"+r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(D["a"]),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("dx-popup",{attrs:{visible:e.options.visible,title:e.options.title,toolbarItems:e.options.toolbarItems,width:e.options.width,height:e.options.height,onHidden:e.options.onHidden},on:{"update:visible":function(t){return e.$set(e.options,"visible",t)}}},[a("dx-scroll-view",[a("DxForm",{ref:"dxForm1"})],1)],1)],1)},j=[],T=a("9b13"),S=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.options={id:0,visible:!1,title:"修改主账号",toolbarItems:[],width:400,height:230,onHidden:null},e.formData1={},e}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"watch_visible",value:function(e,t){this.options.visible=e}},{key:"mounted",value:function(){var e=this;this.options.visible=!!this.visible,this.options.onHidden=function(){e.$emit("onHide",!1)},this.options.toolbarItems.push({location:"after",toolbar:"bottom",widget:"dxButton",options:{text:"保存",type:"success",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var a,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.dxForm1.option("formData"),a.user_name_1==a.user_name_2){t.next=5;break}return e.alert("两次输入的新账号不相同!"),t.abrupt("return");case 5:return r="",0==a.master_account?r+="mobile_num="+a.user_name_1:1==a.master_account&&(r+="mail="+a.user_name_1),t.next=9,(new _["a"]).userUpdate(a.id,"account_token="+e.token+"&"+r);case 9:n=t.sent,n.code==T["a"].OK||n.code==T["a"].isSame||n.code==T["a"].isSameSaveData?e.toast(function(){e.$emit("onHide",!0)}):e.errorCodeMsg(n.code,n.msg),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),e.error(t.t0);case 16:case"end":return t.stop()}},t,null,[[0,13]])}));function a(){return t.apply(this,arguments)}return a}()}}),this.options.toolbarItems.push({location:"after",toolbar:"bottom",widget:"dxButton",options:{text:"取消",type:"normal",onClick:function(t){e.$emit("onHide",!1)}}}),this.dxForm1=this.getDxInstanceByKey("dxForm1");var t=[{dataField:"old_user",label:{text:"旧账号"},editorOptions:{placeholder:"请输入名称",disabled:!0},validationRules:[k["a"].getRequired("名称不能为空!")]},{dataField:"user_name_1",label:{text:"新账号"},editorOptions:{placeholder:"请输入新账号"},validationRules:[k["a"].getRequired("新账号不能为空!")]},{dataField:"user_name_2",label:{text:"确认新账号"},editorOptions:{placeholder:"请输入确认新账号"},validationRules:[k["a"].getRequired("确认新账号不能为空!")]}];this.dxForm1.option({items:t,formData:this.formData1})}},{key:"Show",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:0,0!=t){e.next=4;break}e.next=13;break;case 4:if(!(t>0)){e.next=13;break}return e.next=7,(new _["a"]).getUserModel(t);case 7:a=e.sent,r=a.data,this.formData1.id=t,this.formData1.master_account=r.master_account,0==r.master_account?this.formData1.old_user=r.mobile_num:this.formData1.old_user=r.mail,this.dxForm1.option({formData:this.formData1});case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(b["a"]);d["a"]([Object(p["b"])()],S.prototype,"visible",void 0),d["a"]([Object(p["d"])("visible")],S.prototype,"watch_visible",null),S=d["a"]([Object(p["a"])({components:{DxDataGrid:f["DxDataGrid"],DxForm:f["DxForm"],DxTreeView:f["DxTreeView"],DxPopup:f["DxPopup"],DxScrollView:f["DxScrollView"]}})],S);var M=S,L=M,P=a("17cc"),C=Object(P["a"])(L,R,j,!1,null,null,null),G=C.exports,U=a("efc6"),H=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.user_id=0,e.db_id="",e}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"create",value:function(e,t){var a=this;this.user_id=e,this.db_id=t;var r=this.createDataGridColumns([{dataField:"user_mobile_num",caption:"手机号",cellTemplate:function(e,t){var a="(+".concat(t.data.country_code,")").concat(t.value);$("<span>").append(a).appendTo(e)}},{dataField:"user_mail",caption:"邮箱"},{dataField:"user_name",caption:"账号"},{dataField:"action_type",caption:"操作类型",cellTemplate:function(e,t){var a=y["a"].getDicText(y["a"].getDictonary().data.public_user_operate_type,t.value);$("<span>").append(a).appendTo(e)}},{dataField:"subject",caption:"主题"},{dataField:"content",caption:"内容"},{dataField:"create_time",caption:"操作时间"}]);return this.grid=this.createPopDataList({title:"用户操作日志"},{columns:r},function(e){var t=e.toolbarOptions.items;t.push({location:"before",widget:"dxButton",options:{text:"刷新",icon:"refush",onClick:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.grid.refresh();case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}})}),this.getUserRefDataList(),this.grid}},{key:"getUserRefDataList",value:function(){var e=this,t=this.getDataGridPager(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(a,r,n){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(new _["a"]).getUserOpLogsListPager(e.user_id,e.db_id,a,r,n);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},t)}));return function(e,a,r){return t.apply(this,arguments)}}());this.grid.option({remoteOperations:!0,dataSource:t})}}]),t}(b["a"]),E=a("87cd"),I=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.user_id=0,e.db_id="",e}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"create",value:function(e,t){var a=this;this.user_id=e,this.db_id=t;var r=this.createFormItems([{dataField:"reduce_time",label:{text:"所扣时长(分钟)"},editorOptions:{placeholder:"请输入所扣时长"}},{dataField:"invoice_money",label:{text:"退款金额(分)"},editorOptions:{placeholder:"请选输入退款金额"}}]);return this.form=this.createPopForm({title:"用户部分退款",width:500,height:300},{items:r},{hasReset:!1},function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.option("formData"),e.next=3,(new E["a"]).setUserDurationEdit(a.user_id,n.reduce_time,n.invoice_money);case 3:return i=e.sent,i.code==T["a"].OK||i.code==T["a"].isSame||i.code==T["a"].isSameSaveData?a.toast(function(){r.hide()}):a.errorCodeMsg(i.code,i.msg),e.abrupt("return",!1);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),this.form}}]),t}(b["a"]),K=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.dxDataGridKey1="dxDataGridKey1",e.userAPI=new _["a"],e.dxSearchFormKey1="dxSearchFormKey1",e.mySearchFormModel={search_type:0,mobile_num:"",mail:"",group_id:null,status:null,search_title:""},e.master_dialog={visible:!1,onHide:function(t){e.master_dialog.visible=!1}},e.ref_flag=1,e.ref_user_id="",e.userChangeTimeLog=new O,e.userLoginLog=new F,e}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$parent.content_title="用户管理",e.next=3,this.getUserGroupList();case 3:this.initComponent();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initComponent",value:function(){this.dxDataGrid1=this.getDxInstanceByKey(this.dxDataGridKey1);var e=[{dataField:"id",caption:"编号",width:80},{allowFiltering:!0,allowSorting:!0,dataField:"master_account",caption:"主账号类型",width:150,cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.master_account,t.value)).appendTo(e)}},{allowFiltering:!0,allowSorting:!0,dataField:"mobile_num",caption:"手机号",width:150,cellTemplate:function(e,t){var a=m()("<span>");t.value&&""!=t.value.toString()&&t.data.country_code&&""!=t.data.country_code.toString()&&a.append("(+"+t.data.country_code+")"),a.append(t.value),a.appendTo(e)}},{dataField:"mail",caption:"邮箱",width:150},{dataField:"user_name",caption:"账号",width:100},{dataField:"nickname",caption:"用户昵称",width:100},{dataField:"pause_status",caption:"暂停状态",cellTemplate:function(e,t){var a=0==t.value?"red":"green",r=m()("<span style='color:"+a+"'>");1==t.key.package_billing_type&&r.append(y["a"].getDicText(y["a"].getDictonary().data.user_pause_status,t.value)),r.appendTo(e)},width:80},{dataField:"package_title",caption:"套餐名称",width:100},{dataField:"group_title",caption:"用户组",width:80},{dataField:"vip_level_title",caption:"会员级别",width:80},{dataField:"expired_time",caption:"到期时间(包月)",width:160,cellTemplate:function(e,t){var a=t.key.package_billing_type,r=t.key.expired_time,n=t.key.user_earn_minutes,i=w["b"].getNow(),o="";if(2==a){o=w["b"].AddTime(r,w["a"].Milliscond,60*n*1e3);var s="";w["b"].parserDate(o).getTime()-w["b"].parserDate(i).getTime()<0&&(s="red");var c=m()("<span style='color:"+s+"'>");c.append(o),c.appendTo(e)}}},{dataField:"expired_time",caption:"剩余时长(计时)",width:180,cellTemplate:function(e,t){var a=t.key.package_billing_type,r=t.key.expired_time,n=t.key.user_earn_minutes,i=t.key.last_pause_time,o=t.key.pause_status,s=w["b"].getNow(),c=0,u="";if(1==a){if(c=w["b"].parserDate(r).getTime()-w["b"].parserDate(s).getTime(),1==o){var l=w["b"].parserDate(s).getTime()-w["b"].parserDate(i).getTime();c+=l}c+=60*n*1e3,u=w["b"].TimeIntegrate2(c),null!=u&&""!=u||(u="0小时0分钟");var d="";c<0&&(d="red");var p=m()("<span style='color:"+d+"'>");p.append(u),p.appendTo(e)}}},{dataField:"user_from",caption:"用户来源",cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.user_from,t.value)).appendTo(e)},width:100},{dataField:"create_time",caption:"注册时间",width:150},{dataField:"refer_code",caption:"自定义推荐码",width:150},{visible:!1,dataField:"status",caption:"状态",cellTemplate:function(e,t){var a="";switch(t.value){case 0:a="green";break;case 1:a="red";break;case 2:a="blue";break}m()("<span style='color:"+a+"'>").append(y["a"].getDicText(y["a"].getDictonary().data.user_status,t.value)).appendTo(e)},width:60},{visible:!1,dataField:"locked_ip",caption:"锁定IP",width:100},{visible:!1,dataField:"sex",caption:"性别",cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.user_sex,t.value)).appendTo(e)}},{visible:!1,dataField:"mobile_contact_type",caption:"通讯联系类型",cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.mobile_contact_type,t.value)).appendTo(e)}},{visible:!1,dataField:"mobile_contact_number",caption:"联系号码"},{visible:!1,dataField:"public_ip",caption:"注册IP"},{visible:!1,dataField:"stoped_remaining",caption:"是否提醒",cellTemplate:function(e,t){var a=0==t.value?"red":"green";m()("<span style='color:"+a+"'>").append(y["a"].getDicText(y["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{visible:!1,dataField:"ver_from",caption:"验证来源",cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.user_ver_type,t.value)).appendTo(e)}},{visible:!1,dataField:"recommend_nickname",caption:"推荐用户"},{visible:!1,dataField:"lang_id",caption:"语言",cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.user_lang,t.value)).appendTo(e)}},{visible:!1,dataField:"package_order_connects",caption:"订阅连接数"},{visible:!1,dataField:"database_num",caption:"分库编号"},{visible:!1,dataField:"change_time",caption:"修改时间"},{dataField:"create_staff_name",caption:"创建人"},{visible:!1,dataField:"ver_type",caption:"验证类型",cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.user_ver_type,t.value)).appendTo(e)}},{fixed:!0,fixedPosition:"right",dataField:"id",alignment:"center",caption:x["a"].Operate,width:150,cellTemplate:this.cellEdit}],t=this.getDataGridOption({onToolbarPreparing:this.onToolbarPreparingHandler,columns:e,onRowClick:this.onRowClickHandler,height:"inherit"});this.dxDataGrid1.option(t)}},{key:"initComponentSearchForm",value:function(){this.dxSearchForm1=this.getDxInstanceByKey(this.dxSearchFormKey1),this.dxSearchForm1.option({formData:this.mySearchFormModel,colCount:12,items:[{colSpan:2,label:{text:"搜索类型"},dataField:"search_type",editorType:"dxSelectBox",editorOptions:{placeholder:"请选择搜索类型",displayExpr:"text",valueExpr:"id",dataSource:[{text:"手机号",id:0},{text:"账号",id:1},{text:"邮箱",id:2}],value:0},validationRules:[]},{colSpan:2,label:{text:"关键词"},dataField:"search_title",editorType:"dxTextBox",editorOptions:{placeholder:"请根据类型输入关键词进行查询!"},validationRules:[]},{colSpan:2,itemType:"button",horizontalAlignment:"left",buttonOptions:{text:"搜索",icon:"search",type:"success",onClick:this.SearchUserHandler}}]})}},{key:"getUserGroupList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.userAPI.getList();case 2:t=e.sent,this.role_list=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onSearch",value:function(e,t,a){this.setSearchKeywordDic(e),this.getUserList()}},{key:"SearchUserHandler",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=[],0==this.mySearchFormModel.search_type&&""!=this.mySearchFormModel.search_title&&t.push({name:"mobile_num",filter:"equal",keyword:this.mySearchFormModel.search_title}),1==this.mySearchFormModel.search_type&&""!=this.mySearchFormModel.search_title&&t.push({name:"user_name",filter:"equal",keyword:this.mySearchFormModel.search_title}),2==this.mySearchFormModel.search_type&&""!=this.mySearchFormModel.search_title&&t.push({name:"mail",filter:"equal",keyword:this.mySearchFormModel.search_title}),this.setSearchKeywordDic(t),this.getUserList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onRowClickHandler",value:function(e){var t=this;this.dbClick(function(){t.redirect("/user/edit/"+e.key.id)})}},{key:"cellEdit",value:function(e,t){var a=this;new g.a(e,{dataSource:[{id:"1",name:"操作",items:[{id:"1_1",name:"编辑",disabled:!1},{id:"1_2",name:"重置密码"},{id:"1_3",name:"积分日志"},{id:"1_4",name:"剩余活动积分",disabled:!1},{id:"1_5",name:"网吧IP",disabled:1!=t.key.user_type},{id:"1_6",name:"赠送时长"},{id:"1_7",name:"暂停",disabled:1!=t.key.package_billing_type},{id:"1_8",name:"申请退款"},{id:"1_9",name:"时长变化"},{id:"1_10",name:"登录日志"},{id:"1_11",name:"主账号修改"},{id:"1_12",name:"删除账号"},{id:"1_13",name:"推荐关系"},{id:"1_14",name:"用户绑定日志"},{id:"1_15",name:"用户部分退款"}]}],hideSubmenuOnMouseLeave:!1,displayExpr:"name",onItemClick:function(e){var r=e.itemData.id.toString();switch(r){case"1_1":a.redirect("/user/edit/"+t.value);break;case"1_2":a.redirect("/user/repasswd/"+t.value);break;case"1_3":a.redirect("/user/"+t.value+"/point_log/list/"+t.data.database_num);break;case"1_4":a.redirect("/user/"+t.value+"/point_short/list/"+t.data.database_num);break;case"1_5":a.redirect("/user/"+t.value+"/wanip/list");break;case"1_6":a.redirect("/user/"+t.value+"/duration/edit");break;case"1_7":a.redirect("/user/"+t.key.database_num+"/pause/edit/"+t.value);break;case"1_8":a.redirect("/user/"+t.value+"/approval/apply");break;case"1_9":var n=t.data.database_num,o=t.value;a.getChangeDurationLogsList(n,o);break;case"1_10":var s=t.data.database_num,c=t.value;a.getUserLoginLogsList(s,c);break;case"1_11":a.master_dialog.visible=!0,a.master_dialog.id=t.value,a.$refs["master_user"].Show(t.value);break;case"1_12":var u=a.createFormItems([{dataField:"delete_explain",label:{text:"删除原因"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入删除原因!",height:80},validationRules:[k["a"].getRequired("用户删除原因不能为空!")]}]),l={user_id:t.value};a.createPopForm({width:400,height:220,title:"删除用户"},{formData:l,items:u},{hasReset:!1},function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(new _["a"]).setDelete(l.user_id,l.delete_explain);case 3:if(n=e.sent,n.code!=T["a"].OK&&n.code!=T["a"].isSame&&n.code!=T["a"].isSameSaveData){e.next=9;break}return a.toast(function(){a.dxDataGrid1.option({dataSource:[]})}),e.abrupt("return",!0);case 9:a.errorCodeMsg(n.code,n.msg);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),a.error(e.t0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t,a){return e.apply(this,arguments)}}());break;case"1_13":a.ref_user_id=t.value;var d=a.createDataGridColumns([{dataField:"user_mobile_num",caption:"手机号",cellTemplate:function(e,t){var a="(+".concat(t.data.country_code,")").concat(t.value);m()("<span>").append(a).appendTo(e)}},{dataField:"user_mail",caption:"邮箱"},{dataField:"user_name",caption:"账号"},{dataField:"activity_title",caption:"活动"},{dataField:"ref_user_mobile_num",caption:"推荐人手机号",cellTemplate:function(e,t){var a="(+".concat(t.data.ref_country_code,")").concat(t.value);m()("<span>").append(a).appendTo(e)}},{dataField:"ref_user_mail",caption:"推荐人邮箱"},{dataField:"ref_user_name",caption:"推荐人账号"},{dataField:"create_time",caption:"创建时间"}]);a.ref_grid=a.createPopDataList({title:"用户推荐关系"},{columns:d},function(e){var t=e.toolbarOptions.items;t.push({location:"before",widget:"dxButton",options:{text:"推荐人关系",icon:"list",onClick:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.ref_flag=1,a.getUserRefDataList();case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}}),t.push({location:"before",widget:"dxButton",options:{text:"被推荐人关系",icon:"list",onClick:function(){a.ref_flag=2,a.getUserRefDataList()}}})});break;case"1_14":var p=t.value,h=t.data.database_num;(new H).create(p,h);break;case"1_15":var f=t.value,v=t.data.database_num;(new I).create(f,v);break}}})}},{key:"getUserRefDataList",value:function(){var e=this,t=this.getDataGridPager(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(a,r,n){var i,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="",o="",1==e.ref_flag&&(i=e.ref_user_id.toString()),2==e.ref_flag&&(o=e.ref_user_id.toString()),t.next=5,(new _["a"]).getUserRefListPager(i,o,a,r,n);case 5:return s=t.sent,t.abrupt("return",s);case 7:case"end":return t.stop()}},t)}));return function(e,a,r){return t.apply(this,arguments)}}());this.ref_grid.option({remoteOperations:!0,dataSource:t})}},{key:"getUserList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.getDataGridPager(function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.userAPI.UserListPager(t,r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a,r){return e.apply(this,arguments)}}()),this.dxDataGrid1.option({remoteOperations:!0,dataSource:t});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onToolbarPreparingHandler",value:function(e){e.component;var t=e.toolbarOptions.items;t.push({location:"before",widget:"dxButton",options:{text:x["a"].Add,icon:"add",onClick:this.onAddHandler}}),t.push({location:"before",widget:"dxButton",options:{icon:"refresh",text:"刷新",onClick:this.onRefreshHandler}})}},{key:"onRefreshHandler",value:function(e){this.dxDataGrid1.refresh()}},{key:"onAddHandler",value:function(e){this.redirect("/user/edit")}},{key:"getChangeDurationLogsList",value:function(e,t){var a=this;this.dbNum_Change=e,this.grid_Change=this.createPopDataList({title:"用户时长变化日志"},{columns:[{dataField:"id",caption:"编号",width:80},{allowFiltering:!0,allowSorting:!0,dataField:"user_mobile_num",caption:"所属用户",width:150,cellTemplate:function(e,t){var a=m()("<span>");t.value&&""!=t.value.toString()&&t.data.country_code&&""!=t.data.country_code.toString()&&a.append("(+"+t.data.country_code+")"),a.append(t.value),a.appendTo(e)}},{dataField:"user_mail",caption:"邮箱",width:150},{dataField:"user_name",caption:"账号",width:100},{dataField:"user_nickname",caption:"昵称",width:100},{dataField:"duration_type",caption:"时长类型",width:100,cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.duration_date_type,t.value)).appendTo(e)}},{dataField:"duration",caption:"时长",width:100},{dataField:"user_surplus_time",caption:"剩余时长/到期时间",width:160,cellTemplate:function(e,t){var a=t.data.user_expiry_time;t.value&&null!=t.value&&(a=w["b"].TimeIntegrate2(1e3*t.value)),m()("<span>").append(a).appendTo(e)}},{dataField:"op_source",caption:"操作来源",width:100,cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.duration_option_source,t.value)).appendTo(e)}},{dataField:"create_time",caption:"创建时间",width:160}]},function(e){var t=e.toolbarOptions.items;t.push({location:"before",widget:"dxButton",options:{text:"刷新",icon:"refresh",onClick:function(e){a.grid_Change.refresh()}}})}),this.setSearchKeywords("&user_id="+t),this.getChangeDataList()}},{key:"getChangeDataList",value:function(){var e=this,t=this.getDataGridPager(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(a,r,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.userChangeTimeLog.getListPager(e.dbNum_Change,a,r,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,a,r){return t.apply(this,arguments)}}());this.grid_Change.option({remoteOperations:!0,dataSource:t})}},{key:"getUserLoginLogsList",value:function(e,t){var a=this;this.dbNum=e,this.grid=this.createPopDataList({title:"用户登录日志"},{columns:[{dataField:"id",caption:"编号",width:80},{allowFiltering:!0,allowSorting:!0,dataField:"user_mobile_num",caption:"所属用户",width:150,cellTemplate:function(e,t){var a=m()("<span>");t.value&&""!=t.value.toString()&&t.data.country_code&&""!=t.data.country_code.toString()&&a.append("(+"+t.data.country_code+")"),a.append(t.value),a.appendTo(e)}},{dataField:"user_mail",caption:"邮箱",width:150},{dataField:"user_name",caption:"账号",width:100},{dataField:"user_nickname",caption:"昵称",width:100},{dataField:"login_type",caption:"登录类型",width:100,cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.login_type,t.value)).appendTo(e)}},{dataField:"login_account_type",caption:"登录账号类型",width:100,cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.login_account_type,t.value)).appendTo(e)}},{dataField:"login_country_code",caption:"登录区域编码",width:100,cellTemplate:function(e,t){m()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.region_code,t.value)).appendTo(e)}},{dataField:"login_country_iso_code",caption:"登录国家iso代码",width:100},{dataField:"login_ip",caption:"登录IP",width:100},{dataField:"login_time",caption:"登录时间",width:100}]},function(e){var t=e.toolbarOptions.items;t.push({location:"before",widget:"dxButton",options:{text:"刷新",icon:"refresh",onClick:function(e){a.grid.refresh()}}})}),this.setSearchKeywords("&user_id="+t),this.getDataList()}},{key:"getDataList",value:function(){var e=this,t=this.getDataGridPager(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(a,r,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.userLoginLog.getListPager(e.dbNum,a,r,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,a,r){return t.apply(this,arguments)}}());this.grid.option({remoteOperations:!0,dataSource:t})}}]),t}(b["a"]);K=d["a"]([Object(p["a"])({components:{DxDataGrid:f["DxDataGrid"],DxForm:f["DxForm"],DxTreeView:f["DxTreeView"],DxMenu:f["DxMenu"],MyMaster:G,dxUserSearchForm:U["a"]}})],K);var B=K,A=B,q=A,N=Object(P["a"])(q,r,n,!1,null,null,null);t["default"]=N.exports},"3ebb":function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return o});a("5f33"),a("f91a");var r,n=a("eb12"),i=a("ba94");(function(e){e[e["Year"]=0]="Year",e[e["Month"]=1]="Month",e[e["Date"]=2]="Date",e[e["Week"]=3]="Week",e[e["Hour"]=4]="Hour",e[e["Minute"]=5]="Minute",e[e["Second"]=6]="Second",e[e["Milliscond"]=7]="Milliscond"})(r||(r={}));var o=function(){function e(){Object(n["a"])(this,e)}return Object(i["a"])(e,[{key:"compareDate",value:function(e,t){}}],[{key:"parserDate",value:function(e){var t=Date.parse(e);return isNaN(t)?new Date:new Date(Date.parse(e.replace(/-/g,"/")))}},{key:"getNow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-MM-dd HH:mm:ss",t=new Date,a={"M+":t.getMonth()+1,"d+":t.getDate(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return e}},{key:"convertDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",a={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return t}},{key:"AddTime",value:function(e,t,a){var n=this.parserDate(e);switch(t){case r.Milliscond:n.setMilliseconds(n.getMilliseconds()+a);break;case r.Date:n.setDate(n.getDate()+a);break;case r.Month:n.setMonth(n.getMonth()+a);break;case r.Week:n.setDate(n.getDate()+7*a);break}return this.convertDate(n)}},{key:"TimeIntegrate",value:function(e){var t=Math.floor(e/864e5),a=e%864e5,r=Math.floor(a/36e5),n=a%36e5,i=Math.floor(n/6e4),o=n%6e4,s=Math.round(o/1e3),c="";return t>0&&(c+=" "+t+"天 "),r>0&&(c+=" "+r+"小时 "),i>0&&(c+=" "+i+"分钟 "),s>0&&(c+=" "+s+"秒 "),c}},{key:"TimeIntegrate2",value:function(e){var t=Math.floor(e/864e5),a=e%864e5,r=Math.floor(a/36e5),n=a%36e5,i=Math.floor(n/6e4),o=n%6e4,s=(Math.round(o/1e3),"");return t>0&&(r+=24*t),r>0&&(s+=" "+r+"小时 "),i>0&&(s+=" "+i+"分钟 "),s}}]),e}()},"87cd":function(e,t,a){"use strict";a.d(t,"a",function(){return l});a("4453");var r=a("ee95"),n=a("eb12"),i=a("ba94"),o=a("5ee8"),s=a("4e86"),c=a("5bc3"),u=a("f322"),l=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),Object(i["a"])(t,[{key:"UserDurationListPager",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",a=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,n="/staff/member/appeal?account_token="+this.token+"&size="+a+"&page="+r+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"userDurationAdd",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/appeal",e.next=3,this.httpPost(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"userDurationUpdate",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/"+t+"/duration",e.next=3,this.httpPut(r,a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getUserDurationModel",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/member/"+t+"?account_token="+this.token,e.next=3,this.httpGet(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUserDurationEdit",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a,r){var n,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/member/time/".concat(t),i="account_token=".concat(this.token,"&reduce_time=").concat(a,"&invoice_money=").concat(r),e.next=4,this.httpPut(n,i);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}},e,this)}));function t(t,a,r){return e.apply(this,arguments)}return t}()}]),t}(u["a"])},efc6:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DxForm",{ref:"dxSearchFormKey1"})],1)},n=[],i=(a("3a23"),a("612f"),a("48fb"),a("4453"),a("ee95")),o=a("208e"),s=a.n(o),c=a("eb12"),u=a("ba94"),l=a("5ee8"),d=a("4e86"),p=a("5bc3"),h=a("3a61"),m=a("b2e6"),f=a("1639"),v=a("4b0b"),g=a("3787"),b=a("4c5d"),_=a("f042"),y=a.n(_),x=a("74a9"),w=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.options={is_search_user:!1},e.mySearchFormModel={search_type:0,search_country_code:86,search_keyword:""},e}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"isEmptyObject",value:function(e){for(var t in e)return!1;return!0}},{key:"mounted",value:function(){this.options.is_search_user=!!this.is_search_user&&this.is_search_user;var e=0;e=null==this.col_count?12:0,s()(this.options,{col_count:e}),this.initControls()}},{key:"initControls",value:function(){var e=this;this.dxSearchForm1=this.getDxInstanceByKey("dxSearchFormKey1"),this.dxSearchForm1.option({formData:this.mySearchFormModel,colCount:this.options.col_count,items:[{colSpan:2,label:{text:"搜索类型"},dataField:"search_type",editorType:"dxSelectBox",editorOptions:{placeholder:"请选择搜索类型",displayExpr:"text",valueExpr:"id",dataSource:[{text:"手机号",id:0},{text:"账号",id:1},{text:"邮箱",id:2}],value:0,onValueChanged:function(t){var a=t.value,r=e.dxSearchForm1.getEditor("search_country_code");0==a?r.option({disabled:!1}):r.option({disabled:!0})}},validationRules:[v["a"].getRequired("搜索类型不能为空!")]},{colSpan:2,label:{text:"国家区号"},dataField:"search_country_code",editorType:"dxSelectBox",editorOptions:{searchEnabled:!0,placeholder:"请选择国家区号查询!",dataSource:b["a"].getCountryCode(),displayExpr:"id",valueExpr:"id"},validationRules:[v["a"].getRequired("国家区号不能为空!")]},{colSpan:3,label:{text:"关键词"},dataField:"search_keyword",editorType:"dxTextBox",editorOptions:{placeholder:"请根据类型输入关键词进行查询!精确查询数据."},validationRules:[v["a"].getRequired("关键词不能为空!")]},{colSpan:2,itemType:"button",horizontalAlignment:"left",buttonOptions:{text:"搜索",icon:"search",type:"success",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var a,r,n,i,o,s,c,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.validateForm(e.dxSearchForm1)){t.next=2;break}return t.abrupt("return");case 2:if(a=[],0==e.mySearchFormModel.search_type?(a.push({name:"mobile_num",filter:"equal",keyword:e.mySearchFormModel.search_keyword}),a.push({name:"country_code",filter:"equal",keyword:e.mySearchFormModel.search_country_code.toString()})):1==e.mySearchFormModel.search_type?a.push({name:"user_name",filter:"equal",keyword:e.mySearchFormModel.search_keyword}):2==e.mySearchFormModel.search_type&&a.push({name:"mail",filter:"equal",keyword:e.mySearchFormModel.search_keyword}),e.options.is_search_user){t.next=21;break}return r=[],y.a.from(a).forEach(function(e){r.push("".concat(e.name,"__").concat(e.filter,"__").concat(e.keyword))}),n="&search="+r.join("|"),i=new g["a"],t.next=11,i.UserListPager(n);case 11:if(o=t.sent,null!=o.data&&null!=o.data.list&&0!=o.data.list.length){t.next=15;break}return e.alert("没有查询到用户信息"),t.abrupt("return");case 15:s=o.data.list[0],c=s.id,u=s.database_num.toString(),e.$emit("onSearch",a,c,u),t.next=22;break;case 21:e.$emit("onSearch",a,0,0);case 22:case"end":return t.stop()}},t)}));function a(){return t.apply(this,arguments)}return a}()}}]})}}]),t}(f["a"]);h["a"]([Object(m["b"])()],w.prototype,"is_search_user",void 0),h["a"]([Object(m["b"])()],w.prototype,"col_count",void 0),w=h["a"]([Object(m["a"])({components:{DxDataGrid:x["DxDataGrid"],DxForm:x["DxForm"],DxTreeView:x["DxTreeView"],DxPopup:x["DxPopup"],DxTextArea:x["DxTextArea"]}})],w);var k=w,D=k,F=a("17cc"),O=Object(F["a"])(D,r,n,!1,null,null,null);t["a"]=O.exports}}]);