(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0da573"],{"6ad6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("DxForm",{ref:e.dxFormKey1}),a("br"),a("DxDataGrid",{ref:e.dxDataGridKey1}),a("AreaList",{ref:"AreaList"})],1)},i=[],r=(a("b06f"),a("77fe")),o=a.n(r),c=(a("48fb"),a("ea65"),a("4453"),a("ee95")),d=a("eb12"),l=a("ba94"),s=a("5ee8"),u=a("4e86"),p=a("5bc3"),h=a("3a61"),g=a("b2e6"),f=a("a60a"),v=a.n(f),m=a("74a9"),x=a("1639"),y=a("4910"),w=a("4c5d"),_=a("84ec"),b=a("4b0b"),D=a("f322"),k=function(e){function t(){return Object(d["a"])(this,t),Object(s["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),Object(l["a"])(t,[{key:"getListPager",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,n,i,r,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",a=o.length>1&&void 0!==o[1]?o[1]:15,n=o.length>2&&void 0!==o[2]?o[2]:1,i="/staff/game/region?account_token="+this.token+"&size="+a+"&page="+n+t,e.next=6,this.httpGet(i);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:"",t="/staff/layouts/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/game/region",n=t,n.account_token=this.token,e.next=5,this.httpPost(a,n);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,a){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/game/region/"+t,i=a,i.account_token=this.token,e.next=5,this.httpPut(n,i);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/game/region/"+t,n="account_token="+this.token,e.next=4,this.httpDelete(a+"?"+n);case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/game/region/"+t,n="account_token="+this.token,e.next=4,this.httpGet(a+"?"+n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(D["a"]),T=a("9b13"),F=a("c08a"),R=a("87fa"),O=function(e){function t(){var e;return Object(d["a"])(this,t),e=Object(s["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.dxFormKey1="dxForm_Key_1",e.dxDataGridKey1="dxDataGridKey1",e.gameAPI=new y["a"],e.mySearchFormModel={type:0,title:""},e.gameInfoRegionApi=new k,e}return Object(p["a"])(t,e),Object(l["a"])(t,[{key:"mounted",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$parent.content_title="游戏管理",this.initComponent(),e.next=4,this.getGameList();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initComponent",value:function(){this.dxDataGrid1=this.getDxInstanceByKey(this.dxDataGridKey1);var e=[{allowFiltering:!0,allowSorting:!0,dataField:"id",caption:"编号",width:80},{dataField:"title",caption:"游戏名",width:180},{dataField:"game_type",caption:"游戏分类",width:120,cellTemplate:function(e,t){v()("<span>").append(w["a"].getDicText(w["a"].getDictonary().data.game_area,t.value)).appendTo(e)}},{dataField:"game_h1_title",caption:"游戏H5页面标题",width:120},{dataField:"is_hot",width:100,caption:"是否热门",cellTemplate:function(e,t){var a=0==t.value?"red":"green";v()("<span style='color:"+a+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"include_region_codes",caption:"包含区域",width:100,cellTemplate:function(e,t){var a=[];try{var n=t.value.toString().split(","),i=!0,r=!1,c=void 0;try{for(var d,l=o()(n);!(i=(d=l.next()).done);i=!0){var s=d.value;s&&""!=s&&a.push(w["a"].getDicText(w["a"].getDictonary().data.region_code,Number(s)))}}catch(u){r=!0,c=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw c}}}catch(p){}v()("<span>").append(a.join(",")).appendTo(e)}},{dataField:"exclude_region_codes",caption:"排除区域",width:100,cellTemplate:function(e,t){var a=[];try{var n=t.value.toString().split(","),i=!0,r=!1,c=void 0;try{for(var d,l=o()(n);!(i=(d=l.next()).done);i=!0){var s=d.value;s&&""!=s&&a.push(w["a"].getDicText(w["a"].getDictonary().data.region_code,Number(s)))}}catch(u){r=!0,c=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw c}}}catch(p){}v()("<span>").append(a.join(",")).appendTo(e)}},{dataField:"free_include_region_codes",caption:"限免包含区域",width:100,cellTemplate:function(e,t){var a=[];try{var n=t.value.toString().split(","),i=!0,r=!1,c=void 0;try{for(var d,l=o()(n);!(i=(d=l.next()).done);i=!0){var s=d.value;s&&""!=s&&a.push(w["a"].getDicText(w["a"].getDictonary().data.region_code,Number(s)))}}catch(u){r=!0,c=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw c}}}catch(p){}v()("<span>").append(a.join(",")).appendTo(e)}},{dataField:"free_exclude_region_codes",caption:"限免排除区域",width:100,cellTemplate:function(e,t){var a=[];try{var n=t.value.toString().split(","),i=!0,r=!1,c=void 0;try{for(var d,l=o()(n);!(i=(d=l.next()).done);i=!0){var s=d.value;s&&""!=s&&a.push(w["a"].getDicText(w["a"].getDictonary().data.region_code,Number(s)))}}catch(u){r=!0,c=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw c}}}catch(p){}v()("<span>").append(a.join(",")).appendTo(e)}},{dataField:"is_support_windows",width:160,caption:"是否支持windows",cellTemplate:function(e,t){var a=0==t.value?"red":"green";v()("<span style='color:"+a+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"is_support_android",width:120,caption:"是否支持安卓",cellTemplate:function(e,t){var a=0==t.value?"red":"green";v()("<span style='color:"+a+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"is_support_host_game",width:170,caption:"是否支持主机游戏",cellTemplate:function(e,t){var a=0==t.value?"red":"green";v()("<span style='color:"+a+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"is_support_ios",width:120,caption:"是否支持ios",cellTemplate:function(e,t){var a=0==t.value?"red":"green";v()("<span style='color:"+a+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"is_support_mac",width:120,caption:"是否支持mac",cellTemplate:function(e,t){var a=0==t.value?"red":"green";v()("<span style='color:"+a+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"is_config_id",caption:"是否启用区服配置",width:160,cellTemplate:function(e,t){var a=0==t.value?"red":"green";v()("<span style='color:"+a+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"is_valid",width:100,caption:"是否有效",cellTemplate:function(e,t){var a=0==t.value?"red":"green";v()("<span style='color:"+a+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{visible:!1,dataField:"android_dns_model",width:170,caption:"安卓DNS",cellTemplate:function(e,t){v()("<span>").append(w["a"].getDicText(w["a"].getDictonary().data.android_dns_model,t.value)).appendTo(e)}},{visible:!1,dataField:"sort_num",width:80,caption:"Xml排序"},{dataField:"is_free",width:80,caption:"是否限免",cellTemplate:function(e,t){var a=0==t.value?"red":"green";v()("<span style='color:"+a+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"is_hide_bandwidth",width:85,caption:"是否隐藏带宽",cellTemplate:function(e,t){var a=0==t.value?"red":"green";v()("<span style='color:"+a+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{visible:!1,dataField:"change_staff_name",caption:"修改人",width:80},{visible:!1,dataField:"change_time",caption:"修改时间",width:200},{visible:!1,dataField:"create_staff_name",caption:"创建人",width:80},{visible:!1,dataField:"create_time",caption:"创建时间",width:160},{fixed:!0,fixedPosition:"right",dataField:"id",alignment:"center",caption:_["a"].Operate,width:280,cellTemplate:this.cellEdit}],t=this.getDataGridOption({onToolbarPreparing:this.onToolbarPreparingHandler,columns:e,paging:{pageSize:20},onRowClick:this.onRowClickHandler});this.dxDataGrid1.option(t),this.dxSearchForm1=this.getDxInstanceByKey(this.dxFormKey1),this.dxSearchForm1.option({formData:this.mySearchFormModel,width:800,colCount:3,items:[{label:{text:"游戏平台类型"},dataField:"type",editorType:"dxSelectBox",editorOptions:{placeholder:"请选择游戏平台类型",width:150,displayExpr:"text",valueExpr:"id",dataSource:[{text:"PC",id:0},{text:"Android",id:1},{text:"iOS",id:2},{text:"Mac",id:3},{text:"主机",id:4}],value:0},validationRules:[b["a"].getRequired("游戏平台类型不能为空!")]},{itemType:"button",horizontalAlignment:"left",buttonOptions:{text:"搜索游戏",icon:"search",type:"success",onClick:this.SearchFormHandler}}]})}},{key:"SearchFormHandler",value:function(){if(this.validateForm(this.dxSearchForm1)){this.dxDataGrid1.clearFilter();var e=this.mySearchFormModel.type,t=(this.mySearchFormModel.title,"");switch(e){case 0:t="&search=is_support_windows__equal__1";break;case 1:t="&search=is_support_android__equal__1";break;case 2:t="&search=is_support_ios__equal__1";break;case 3:t="&search=is_support_mac__equal__1";break;case 4:t="&search=is_support_host_game__equal__1";break}this.setSearchKeywords(t),this.dxDataGrid1.refresh()}}},{key:"onRowClickHandler",value:function(e){var t=this;this.dbClick(function(){t.redirect("/game/edit/"+e.key.id)})}},{key:"cellEdit",value:function(e,t){var a=this,n=v()("<a href='javascript:void(0)'> 区域设置 </a>");n.bind("click",function(e){a.regionDataList(t.value)});var i=this.getCreateLink("编辑",function(e){a.redirect("/game/edit/"+t.value)}),r=this.getCreateLink("修改记录",function(e){a.redirect("/game/"+t.value+"/log/list")}),o=this.getCreateLink("游戏区服列表",function(e){a.$refs["AreaList"].show(t.value,{title:"游戏区服列表"})});v()("<div>").append(i).append(" | ").append(o).append(" | ").append(n).append(" | ").append(r).appendTo(e)}},{key:"getGameList",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.getDataGridPager(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,n,i){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.gameAPI.gameListPager(t,n,i);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()),this.dxDataGrid1.option({remoteOperations:!0,dataSource:t});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onToolbarPreparingHandler",value:function(e){var t=this,a=e.toolbarOptions.items;a.push({location:"before",widget:"dxButton",options:{text:_["a"].Add,icon:"add",onClick:this.onAddHandler}}),a.push({location:"before",widget:"dxButton",options:{icon:"refresh",text:"刷新",onClick:this.onRefreshHandler}}),this.createSearchToolbars(a,this.dxDataGrid1.option("columns"),function(){t.getGameList()},"title",R["a"].contain)}},{key:"onAddHandler",value:function(e){this.redirect("/game/edit")}},{key:"onRefreshHandler",value:function(e){this.setSearchKeywords(""),this.dxDataGrid1.refresh()}},{key:"regionDataList",value:function(e){var t=this;this.grid_region=this.createPopDataList({title:"本地化列表"},{columns:[{dataField:"id",caption:"编号",width:80},{dataField:"game_title",caption:"所属游戏",width:100},{dataField:"region_code",caption:"区域代码",width:100,cellTemplate:function(e,t){v()("<span>").append(w["a"].getDicText(w["a"].getDictonary().data.region_code,t.value)).appendTo(e)}},{dataField:"title",caption:"标题",width:160},{dataField:"info",caption:"信息",width:160},{dataField:"keyword",caption:"关键词",width:160},{dataField:"create_staff_name",caption:"创建管理员",width:160},{dataField:"create_time",caption:"创建时间",width:160},{dataField:"update_staff_name",caption:"修改管理员",width:160},{dataField:"change_time",caption:"修改时间",width:160},{fixed:!0,fixedPosition:"right",dataField:"id",alignment:"center",caption:"操作",width:200,cellTemplate:function(e,a){var n=v()("<a href='javascript:void(0)'> 编辑 </a>");n.bind("click",function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(n){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.gameInfoRegionApi.getModel(a.value);case 2:i=e.sent,t.regionDataEdit(i.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),v()("<div>").append(n).appendTo(e)}}]},function(a){var n=a.toolbarOptions.items;n.push({location:"before",widget:"dxButton",options:{text:"添加",icon:"add",onClick:function(a){t.regionDataEdit({id:0,game_id:e})}}}),n.push({location:"before",widget:"dxButton",options:{text:"刷新",icon:"refresh",onClick:function(e){t.grid_region.refresh()}}}),t.createSearchToolbars(n,t.dxDataGrid1.option("columns"),function(){t.getLocalDataList()})}),this.setSearchKeywords("&game_id="+e),this.getLocalDataList()}},{key:"getLocalDataList",value:function(){var e=this,t=this.getDataGridPager(function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(a,n,i){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.gameInfoRegionApi.getListPager(a,n,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}());this.grid_region.option({remoteOperations:!0,dataSource:t})}},{key:"regionDataEdit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0},a=this.createFormItems([{dataField:"region_code",label:{text:"区域代码"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择区域代码",dataSource:w["a"].getDictonary().data.region_code,displayExpr:"name",valueExpr:"id"},validationRules:[b["a"].getRequired("区域代码不能为空!")]},{dataField:"title",label:{text:"标题"},editorOptions:{placeholder:"请选输入标题"},validationRules:[b["a"].getRequired("标题不能为空!")]},{dataField:"keyword",label:{text:"关键词"},editorOptions:{placeholder:"请输入关键词."},validationRules:[b["a"].getRequired("关键词不能为空!")]},{dataField:"info",label:{text:"信息"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入信息.",height:80},validationRules:[b["a"].getRequired("信息不能为空!")]}]);this.createPopForm({title:"编辑本地化",width:400,height:300},{formData:t,items:a},{},function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(a,n){var i,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.validateForm(a)){t.next=3;break}return t.abrupt("return",!1);case 3:if(i=a.option("formData"),i.id!=T["a"].zero){t.next=10;break}return t.next=7,e.gameInfoRegionApi.setAdd(i);case 7:r=t.sent,t.next=13;break;case 10:return t.next=12,e.gameInfoRegionApi.setUpdate(i.id,i);case 12:r=t.sent;case 13:if(r.code!=T["a"].OK&&r.code!=T["a"].isSame&&r.code!=T["a"].isSameSaveData){t.next=19;break}return t.next=16,e.toast(function(){e.grid_region.refresh()});case 16:return t.abrupt("return",!0);case 19:e.errorCodeMsg(r.code,r.msg);case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](0),e.error(t.t0);case 25:return t.abrupt("return",!1);case 26:case"end":return t.stop()}},t,null,[[0,22]])}));return function(e,a){return t.apply(this,arguments)}}())}}]),t}(x["a"]);O=h["a"]([Object(g["a"])({components:{DxDataGrid:m["DxDataGrid"],DxForm:m["DxForm"],DxTreeView:m["DxTreeView"],DxPopup:m["DxPopup"],AreaList:F["a"]}})],O);var S=O,j=S,G=j,L=a("17cc"),A=Object(L["a"])(G,n,i,!1,null,null,null);t["default"]=A.exports}}]);