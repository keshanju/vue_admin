(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3172a56c"],{"1ecd":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DxDataGrid",{ref:t.dxDataGridKey1}),n("CreateHtml",{ref:"CreateHtml1"})],1)},a=[],i=(n("f91a"),n("b06f"),n("77fe")),o=n.n(i),s=(n("48fb"),n("ea65"),n("4453"),n("ee95")),c=n("eb12"),u=n("ba94"),l=n("5ee8"),p=n("4e86"),d=n("5bc3"),h=n("3a61"),f=n("b2e6"),v=n("74a9"),w=n("a60a"),b=n.n(w),m=n("1639"),g=n("efee"),x=n("4c5d"),y=n("d1e8"),k=n.n(y),D=n("fa92"),O=n.n(D),j=n("9b13"),_=n("e38e"),R=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(p["a"])(e).apply(this,arguments)),t.dxDataGridKey1="dxDataGridKey1",t.newsAPI=new g["a"],t.show_create_html=!1,t}return Object(d["a"])(e,t),Object(u["a"])(e,[{key:"mounted",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$parent.content_title="文章管理",this.initComponents(),this.getDataList();case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"initComponents",value:function(){this.dxDataGrid1=this.getDxInstanceByKey(this.dxDataGridKey1);var t=[{dataField:"id",caption:"编号",width:80},{allowFiltering:!0,allowSorting:!0,dataField:"title",caption:"标题",width:120},{dataField:"class_type",caption:"类别",width:100,cellTemplate:function(t,e){b()("<span>").append(x["a"].getDicText(x["a"].getDictonary().data.class_type,e.value)).appendTo(t)}},{dataField:"summary",caption:"摘要",width:200,visible:!1},{dataField:"tag",caption:"引用标记",width:200},{allowFiltering:!0,allowSorting:!0,dataField:"hits",caption:"点击次数",width:100},{dataField:"support_type",caption:"支持类型",width:100,cellTemplate:function(t,e){b()("<span>").append(x["a"].getDicText(x["a"].getDictonary().data.support_type,e.value)).appendTo(t)}},{dataField:"publish_status",caption:"发布状态",width:100,cellTemplate:function(t,e){b()("<span>").append(x["a"].getDicText(x["a"].getDictonary().data.publish_status,e.value)).appendTo(t)}},{dataField:"is_top",caption:"是否置顶",width:100,cellTemplate:function(t,e){b()("<span>").append(x["a"].getDicText(x["a"].getDictonary().data.flag,e.value)).appendTo(t)}},{dataField:"publish_time",caption:"发布时间",width:160},{dataField:"create_time",caption:"创建时间",width:160,visible:!1},{dataField:"create_staff_name",caption:"创建人",width:80,visible:!1},{dataField:"change_time",caption:"更新时间",width:160,visible:!1},{dataField:"include_region_codes",caption:"包含区域",width:100,cellTemplate:function(t,e){var n=[];try{var r=e.value.toString().split(","),a=!0,i=!1,s=void 0;try{for(var c,u=o()(r);!(a=(c=u.next()).done);a=!0){var l=c.value;l&&""!=l&&n.push(x["a"].getDicText(x["a"].getDictonary().data.region_code,Number(l)))}}catch(p){i=!0,s=p}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}}catch(d){}b()("<span>").append(n.join(",")).appendTo(t)}},{dataField:"exclude_region_codes",caption:"排除区域",width:100,cellTemplate:function(t,e){var n=[];try{var r=e.value.toString().split(","),a=!0,i=!1,s=void 0;try{for(var c,u=o()(r);!(a=(c=u.next()).done);a=!0){var l=c.value;l&&""!=l&&n.push(x["a"].getDicText(x["a"].getDictonary().data.region_code,Number(l)))}}catch(p){i=!0,s=p}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}}catch(d){}b()("<span>").append(n.join(",")).appendTo(t)}},{fixed:!0,fixedPosition:"right",dataField:"id",alignment:"center",caption:"操作",width:200,cellTemplate:this.CellEdit}],e=this.getDataGridOption({onToolbarPreparing:this.onToolbarPreparingHandler,columns:t,onRowClick:this.onRowClickHandler});this.dxDataGrid1.option(e)}},{key:"onRowClickHandler",value:function(t){var e=this;this.dbClick(function(){e.redirect("/sell/news/edit/"+t.key.id)})}},{key:"CellEdit",value:function(t,e){var n=this,r=x["a"].GetSettingsVal("Notice_Browser_Url").replace("${id}",e.value),a=this.getCreateLink("编辑",function(t){n.redirect("/sell/news/edit/"+e.value)}),i=this.getCreateLink("生成静态",function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.newsAPI.createNewsDetails(e.value);case 3:a=t.sent,a.code==j["a"].OK||a.code==j["a"].isSame||a.code==j["a"].isSameSaveData?n.toast(function(){},"生成静态成功!"):n.errorCodeMsg(a.code,a.msg),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),n.error(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}());b()("<div>").append(a).append(" | ").append(b()("<a href='"+r+"' target='_blank'> 浏览 </a>")).append(" | ").append(i).appendTo(t)}},{key:"onToolbarPreparingHandler",value:function(t){var e=this,n=(t.component,t.toolbarOptions.items);n.push({location:"before",widget:"dxButton",options:{text:"添加",icon:"add",onClick:this.onAddHandler}}),n.push({location:"before",widget:"dxButton",options:{text:"刷新",icon:"refresh",onClick:this.onRefreshHandler}}),n.push({location:"before",widget:"dxButton",options:{text:"批量导入",icon:"upload",onClick:this.onUploadJsonHandler}}),n.push({location:"before",widget:"dxButton",options:{text:"生成新闻JSON列表",onClick:function(){e.$refs["CreateHtml1"].show()}}}),n.push({location:"before",widget:"dxButton",options:{text:"重新生成新闻静态",onClick:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.newsAPI.reCreateAllNewsDetails();case 3:n=t.sent,n.code==j["a"].OK||n.code==j["a"].isSame||n.code==j["a"].isSameSaveData?e.toast(function(){},"重新生成新闻静态成功!"):e.errorCodeMsg(n.code,n.msg),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));function n(){return t.apply(this,arguments)}return n}()}}),this.createSearchToolbars(n,this.dxDataGrid1.option("columns"),function(){e.getDataList()})}},{key:"onRefreshHandler",value:function(t){this.dxDataGrid1.refresh()}},{key:"onAddHandler",value:function(t){this.redirect("/sell/news/edit")}},{key:"getDataList",value:function(){var t=this,e=this.getDataGridPager(function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(n,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.newsAPI.getListPager(n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}());this.dxDataGrid1.option({remoteOperations:!0,dataSource:e})}},{key:"onUploadJsonHandler",value:function(t){var e=this,n=b()("<div>");n.appendTo(t.element),this.popup1=new O.a(n[0],{width:400,height:220,title:"批量上传文章",contentTemplate:function(){var t=new k.a(b()("<div>")[0],{multiple:!1,accept:"*",uploadMode:"instantly",uploadMethod:"POST",name:"filename",uploadUrl:e.uploadApi.getNewsUploadPath("json"),onUploaded:function(t){e.toast(function(){e.popup1.hide(),e.dxDataGrid1.refresh()},"您的信息已经上传成功!")},onUploadError:function(){console.log("error")}});return t.element()},toolbarItems:[{location:"after",toolbar:"bottom",visible:!0,widget:"dxButton",options:{type:"success",text:"模板文件",onClick:function(){var t=document.createElement("a");t.href="/static/news_bat.json",t.download="news.json",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}}]}),this.popup1.show()}}]),e}(m["a"]);R=h["a"]([Object(f["a"])({components:{DxDataGrid:v["DxDataGrid"],DxForm:v["DxForm"],CreateHtml:_["a"]}})],R);var T=R,C=T,F=C,P=n("17cc"),S=Object(P["a"])(F,r,a,!1,null,null,null);e["default"]=S.exports},"417d":function(t,e,n){"use strict";var r=n("6c85"),a=n.n(r);function i(t){if(a()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var o=n("ab6b"),s=n.n(o),c=n("ad81"),u=n.n(c);function l(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return s()(t)}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return i(t)||l(t)||p()}n.d(e,"a",function(){return d})},"50cd":function(t,e,n){"use strict";var r=n("4cf4"),a=n("0763");t.exports=function(t,e,n){e in t?r.f(t,e,a(0,n)):t[e]=n}},"8af1":function(t,e,n){"use strict";var r=n("8232"),a=n("471d"),i=n("7182"),o=n("44a7"),s=n("33ef"),c=n("3202"),u=n("50cd"),l=n("0811");a(a.S+a.F*!n("1969")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,a,p,d=i(t),h="function"==typeof this?this:Array,f=arguments.length,v=f>1?arguments[1]:void 0,w=void 0!==v,b=0,m=l(d);if(w&&(v=r(v,f>2?arguments[2]:void 0,2)),void 0==m||h==Array&&s(m))for(e=c(d.length),n=new h(e);e>b;b++)u(n,b,w?v(d[b],b):d[b]);else for(p=m.call(d),n=new h;!(a=p.next()).done;b++)u(n,b,w?o(p,v,[a.value,b],!0):a.value);return n.length=b,n}})},"92dd":function(t,e,n){n("4d6c"),n("8af1"),t.exports=n("836e").Array.from},"97b2":function(t,e,n){var r=n("419b"),a=n("0902")("iterator"),i=n("9191");t.exports=n("836e").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||i.hasOwnProperty(r(e))}},a945:function(t,e,n){n("98be"),n("4d6c"),t.exports=n("97b2")},ab6b:function(t,e,n){t.exports=n("92dd")},ad81:function(t,e,n){t.exports=n("a945")},e38e:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("dx-popup",{ref:"dxPopup1",attrs:{visible:t.options.visible,title:t.options.title,width:"300",height:"150"},on:{"update:visible":function(e){return t.$set(t.options,"visible",e)}}},[n("dx-scroll-view",[n("DxForm",{ref:"DxForm1"})],1)],1)],1)},a=[],i=(n("48fb"),n("4453"),n("ee95")),o=n("417d"),s=n("eb12"),c=n("ba94"),u=n("5ee8"),l=n("4e86"),p=n("5bc3"),d=n("3a61"),h=n("b2e6"),f=n("74a9"),v=n("1639"),w=n("4c5d"),b=n("efee"),m=n("9b13"),g=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.options={title:"生成静态",visible:!1,toolbarItems:[]},t.formData1={},t}return Object(p["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){this.dxForm1=this.getDxInstanceByKey("DxForm1");var t=[{id:-1,name:"全部分类"}].concat(Object(o["a"])(w["a"].getDictonary().data.class_type));this.dxForm1.option({formData:this.formData1,items:[{dataField:"class_type",label:{text:"类别"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择分类类别",displayExpr:"name",valueExpr:"id",value:-1,dataSource:t},validationRules:[]}]}),this.initToolbarItems()}},{key:"initToolbarItems",value:function(){var t=this;this.options.toolbarItems.push({location:"after",toolbar:"bottom",widget:"dxButton",options:{text:"生成静态",type:"success",onClick:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(n){var r,a,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=n.component,e.prev=1,r.option({disabled:!0}),a=t.formData1.class_type,i=a.toString(),e.next=7,(new b["a"]).createNewsJson(i);case 7:o=e.sent,o.code==m["a"].OK||o.code==m["a"].isSame||o.code==m["a"].isSameSaveData?(r.option({disabled:!1}),t.toast(function(){},"生成静态成功!"),t.hide()):(r.option({disabled:!1}),t.errorCodeMsg(o.code,o.msg)),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](1),r.option({disabled:!1}),t.error(e.t0);case 15:case"end":return e.stop()}},e,null,[[1,11]])}));function n(t){return e.apply(this,arguments)}return n}()}}),this.options.toolbarItems.push({location:"after",toolbar:"bottom",widget:"dxButton",options:{text:"取消",type:"normal",onClick:function(e){t.hide()}}});var e=this.getDxInstanceByKey("dxPopup1");e.option({toolbarItems:this.options.toolbarItems})}},{key:"show",value:function(){this.options.visible=!0}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.options.visible=!1,this.options.onHide&&this.options.onHide(t)}}]),e}(v["a"]);g=d["a"]([Object(h["a"])({components:{DxDataGrid:f["DxDataGrid"],DxForm:f["DxForm"],DxPopup:f["DxPopup"],DxScrollView:f["DxScrollView"]}})],g);var x=g,y=x,k=n("17cc"),D=Object(k["a"])(y,r,a,!1,null,null,null);e["a"]=D.exports},efee:function(t,e,n){"use strict";n.d(e,"a",function(){return l});n("4453");var r=n("ee95"),a=n("eb12"),i=n("ba94"),o=n("5ee8"),s=n("4e86"),c=n("5bc3"),u=n("f322"),l=function(t){function e(){return Object(a["a"])(this,e),Object(o["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(c["a"])(e,t),Object(i["a"])(e,[{key:"getListPager",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r,a,i,o=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,a="/staff/news?account_token="+this.token+"&size="+n+"&page="+r+e,t.next=6,this.httpGet(a);case 6:return i=t.sent,t.abrupt("return",i);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getLabelList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r,a,i,o=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,a="/staff/news/label?account_token="+this.token+"&size="+n+"&page="+r+e,t.next=6,this.httpGet(a);case 6:return i=t.sent,t.abrupt("return",i);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getLableDetail",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/news/label/"+e,r="account_token="+this.token,t.next=4,this.httpGet(n+"?"+r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setUpdateNewsLabel",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,n){var r,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r="/staff/news/label/"+e,a=n,t.next=4,this.httpPut(r,a);case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"setAddNewsLabel",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/news/label",r=e,t.next=4,this.httpPost(n,r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"deleteNewsLabel",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/news/label/"+e,r="account_token="+this.token,t.next=4,this.httpDelete(n+"?"+r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",e="/staff/news/lists?account_token="+this.token,t.next=4,this.httpGet(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setAdd",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/news",r=e,t.next=4,this.httpPost(n,r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setUpdate",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,n){var r,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r="/staff/news/"+e,a=n,t.next=4,this.httpPut(r,a);case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"setDelete",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/news/"+e,r="account_token="+this.token+"&ids="+e,t.next=4,this.httpDelete(n+"?"+r);case 4:t.sent;case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getModel",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/news/"+e,r="account_token="+this.token,t.next=4,this.httpGet(n+"?"+r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"createNewsJson",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r,a,i=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:"",n="/staff/cms/statics/news_json_list",r="account_token="+this.token+"&class_type="+e,t.next=5,this.httpPost(n,r);case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"createNewsDetails",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/cms/statics/news_info",r="account_token="+this.token+"&news_ids="+e,t.next=4,this.httpPost(n,r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"reCreateAllNewsDetails",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="/staff/queue/cms/statics/news_info",n="account_token="+this.token,t.next=4,this.httpPost(e,n);case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}]),e}(u["a"])}}]);