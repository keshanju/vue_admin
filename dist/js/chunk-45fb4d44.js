(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45fb4d44"],{"0189":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("DxForm",{ref:t.dxFormKey1})],1)},a=[],i=(n("4453"),n("ee95")),s=n("eb12"),o=n("ba94"),u=n("5ee8"),c=n("4e86"),d=n("5bc3"),l=n("3a61"),h=n("b2e6"),p=n("74a9"),m=n("a60a"),x=n.n(m),g=n("1639"),b=n("44eb"),f=n("84ec"),v=n("9b13"),y=n("4b0b"),k=n("4c5d"),D=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(u["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.dxFormKey1="dxForm_Key_1",t.gsettingAPI=new b["a"],t.dxFormData1={id:0},t.dxFormDataReset1={},t}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$parent.content_title="全局设置编辑(重新登录后生效)",this.submitText=f["a"].Add,this.ID!==v["a"].zero&&(this.submitText=f["a"].Update),this.initComponent(),this.ID===v["a"].zero){t.next=7;break}return t.next=7,this.getGSettingModel(this.ID);case 7:this.dxFormDataReset1=x.a.extend(!0,{},this.dxFormData1);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"initComponent",value:function(){this.dxForm1=this.getDxInstanceByKey(this.dxFormKey1);var t=this.ID>0,e=[{itemType:"group",items:[{dataField:"key",label:{text:"变量Key"},editorOptions:{placeholder:"请输入变量Key",disabled:t,readOnly:t},validationRules:[y["a"].getRequired("变量Key不能为空!")]},{dataField:"value",label:{text:"变量值"},editorOptions:{placeholder:"请输入变量值"},validationRules:[y["a"].getRequired("变量值不能为空!")]},{dataField:"title",label:{text:"名称"},editorOptions:{placeholder:"请输入变量标题"},validationRules:[y["a"].getRequired("变量名称不能为空!")]},{dataField:"key_type",label:{text:"变量类别"},editorType:"dxSelectBox",editorOptions:{disabled:t,readOnly:t,displayExpr:"name",valueExpr:"id",dataSource:k["a"].getDictonary().data.setting_type},validationRules:[y["a"].getRequired("变量类别不能为空!")]}]},{itemType:"group",colCount:3,items:[{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:this.ID>0?f["a"].Update:f["a"].Add,type:"success",useSubmitBehavior:!0,onClick:this.onClickDoHandler}},{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:"重置",type:"normal",onClick:this.onResetHandler}},{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:f["a"].Back,type:"normal",onClick:this.onClickBackHandler}}]}],n={formData:this.dxFormData1,items:e,width:500};this.dxForm1.option(n)}},{key:"onResetHandler",value:function(t){this.dxFormData1=x.a.extend(!0,{},this.dxFormDataReset1),this.dxForm1.option("formData",this.dxFormData1)}},{key:"onClickDoHandler",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.validateForm(this.dxForm1)){t.next=3;break}return t.abrupt("return");case 3:if(this.dxFormData1.account_token=this.token,e=this.joinFormParams(this.dxFormData1),this.dxFormData1.id!=v["a"].zero){t.next=11;break}return t.next=8,this.gsettingAPI.gsettingAdd(e);case 8:n=t.sent,t.next=14;break;case 11:return t.next=13,this.gsettingAPI.gsettingUpdate(this.dxFormData1.id,e);case 13:n=t.sent;case 14:if(n.code!=v["a"].OK&&n.code!=v["a"].isSame&&n.code!=v["a"].isSameSaveData){t.next=18;break}this.toast(function(){r.redirect("/system/settings/list")}),t.next=20;break;case 18:return t.next=20,this.errorCodeMsg(n.code,n.msg);case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](0),this.error(t.t0);case 25:case"end":return t.stop()}},t,this,[[0,22]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"onClickBackHandler",value:function(){this.redirect("/system/settings/list")}},{key:"getGSettingModel",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.gsettingAPI.getGSettingModel(e);case 2:n=t.sent,this.dxFormData1=n.data,this.dxForm1.option("formData",this.dxFormData1);case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(g["a"]);D=l["a"]([Object(h["a"])({components:{DxDataGrid:p["DxDataGrid"],DxForm:p["DxForm"],DxTreeView:p["DxTreeView"]}})],D);var F=D,w=F,O=w,R=n("17cc"),j=Object(R["a"])(O,r,a,!1,null,null,null);e["default"]=j.exports},"44eb":function(t,e,n){"use strict";n.d(e,"a",function(){return d});n("4453");var r=n("ee95"),a=n("eb12"),i=n("ba94"),s=n("5ee8"),o=n("4e86"),u=n("5bc3"),c=n("f322"),d=function(t){function e(){return Object(a["a"])(this,e),Object(s["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"GSettingListPager",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r,a,i,s=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:15,r=s.length>2&&void 0!==s[2]?s[2]:1,a="/staff/setting?account_token="+this.token+"&size="+n+"&page="+r+e,t.next=6,this.httpGet(a);case 6:return i=t.sent,t.abrupt("return",i);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"gsettingAdd",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/setting",t.next=3,this.httpPost(n,e);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"gsettingUpdate",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r="/staff/setting/"+e,t.next=3,this.httpPut(r,n);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getGSettingModel",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/setting/"+e+"?account_token="+this.token,t.next=3,this.httpGet(n);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(c["a"])}}]);