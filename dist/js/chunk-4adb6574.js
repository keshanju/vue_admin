(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4adb6574"],{d51d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DxDataGrid",{ref:e.dxDataGridKey1}),a("myEdit",{ref:"myEdit"})],1)},n=[],i=(a("4453"),a("ee95")),o=a("eb12"),s=a("ba94"),l=a("5ee8"),u=a("4e86"),c=a("5bc3"),d=a("3a61"),p=a("b2e6"),h=a("74a9"),f=a("a60a"),g=a.n(f),x=a("1639"),m=a("ef99"),v=a("4c5d"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dx-popup",{attrs:{visible:e.options.visible,title:e.options.title,toolbarItems:e.options.toolbarItems,width:e.options.width,height:e.options.height,onHidden:e.options.onHidden},on:{"update:visible":function(t){return e.$set(e.options,"visible",t)}}},[a("dx-scroll-view",[a("dx-form",{ref:"dxForm1"})],1)],1)},b=[],_=a("4b0b"),y=a("9b13"),k=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.WallpaperApi=new m["a"],e.options={visible:!1,title:"新增/修改壁纸分类",toolbarItems:[],width:700,height:800},e.formData={account_token:"",id:0,img_url:"",free_include_region_codes:"",free_include_region_codes_arr:[],free_exclude_region_codes:"",free_exclude_region_codes_arr:[]},e}return Object(c["a"])(t,e),Object(s["a"])(t,[{key:"created",value:function(){var e=this;this.options.toolbarItems.push({location:"after",toolbar:"bottom",widget:"dxButton",options:{text:"修改保存",type:"success",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var a,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.validateForm(e.dxForm1)){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,a=e.dxForm1.option("formData"),a.free_include_region_codes_arr&&(a.free_include_region_codes=a.free_include_region_codes_arr.join(",")),a.free_exclude_region_codes_arr&&(a.free_exclude_region_codes=a.free_exclude_region_codes_arr.join(",")),r=a.id,a.account_token=e.token,r!=y["a"].zero){t.next=14;break}return t.next=11,e.WallpaperApi.setWallAdd(a);case 11:n=t.sent,t.next=17;break;case 14:return t.next=16,e.WallpaperApi.setWallUpdate(r,a);case 16:n=t.sent;case 17:n.code==y["a"].OK||n.code==y["a"].isSame||n.code==y["a"].isSameSaveData?e.toast(function(){e.options.visible=!1,e.options.onHidden(!0)},n.msg):e.errorCodeMsg(n.code,n.msg),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](2),e.error(t.t0);case 23:case"end":return t.stop()}},t,null,[[2,20]])}));function a(){return t.apply(this,arguments)}return a}()}}),this.options.toolbarItems.push({location:"after",toolbar:"bottom",widget:"dxButton",options:{text:"取消",type:"normal",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.options.visible=!1,e.options.onHidden(!0);case 2:case"end":return t.stop()}},t)}));function a(){return t.apply(this,arguments)}return a}()}})}},{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.WallpaperApi.getCateSimpleList();case 2:t=e.sent,a=t.data,r=this.createFormItems([{dataField:"cate_ids",label:{text:"壁纸分类"},editorType:"dxTagBox",editorOptions:{placeholder:"请选择壁纸分类.",displayExpr:"name",valueExpr:"id",showSelectionControls:!0,applyValueMode:"useButtons",dataSource:a,onValueChanged:function(e){}},validationRules:[_["a"].getRequired("请选择分类!")]},{dataField:"title",label:{text:"请输入壁纸名称"},editorOptions:{mode:"text",placeholder:"请输入壁纸名称"},validationRules:[_["a"].getRequired("壁纸名称不能为空!")]},{dataField:"size",label:{text:"请输入壁纸大小"},editorOptions:{mode:"text",placeholder:"请输入壁纸大小"},validationRules:[_["a"].getRequired("请输入壁纸大小!")]},{dataField:"pixel_x",label:{text:"请输入壁纸像素宽"},editorOptions:{mode:"text",placeholder:"请输入壁纸像素宽"},validationRules:[_["a"].getRequired("请输入壁纸像素宽!")]},{dataField:"pixel_y",label:{text:"请输入壁纸像素高"},editorOptions:{mode:"text",placeholder:"请输入壁纸像素高"},validationRules:[_["a"].getRequired("分类英文名称不能为空!")]},this.createUploadFileFormItem(function(e){n.iImageNode=e},{dataField:"img_url",label:{text:"背景图"},validationRules:[_["a"].getRequired("请上传背景图!")]},{name:"filename",uploadUrl:this.uploadApi.getUploadNormalPath("images")}),{dataField:"download_url",label:{text:"请输入壁纸视频地址"},editorOptions:{mode:"text",placeholder:"请输入壁纸视频地址"},validationRules:[_["a"].getRequired("请输入壁纸视频地址!")]},{dataField:"type",label:{text:"请选择壁纸是否动态壁纸"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择壁纸是否动态壁纸.",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.flag}},{dataField:"order",label:{text:"请输入壁纸排序"},editorOptions:{mode:"text",value:0,placeholder:"请输入壁纸排序"}},{dataField:"is_hot",label:{text:"请选择是否热门"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择是否热门.",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.flag}},{dataField:"is_top",label:{text:"请选择是否置顶"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择是否置顶.",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.flag}},{dataField:"is_free",label:{text:"是否免费"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择免费类型.",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.flag},validationRules:[_["a"].getRequired("请选择免费类型!")]},{dataField:"free_include_region_codes_arr",label:{text:"免费包含地区"},editorType:"dxTagBox",editorOptions:{placeholder:"请选择包含地区.",displayExpr:"name",valueExpr:"id",showSelectionControls:!0,applyValueMode:"useButtons",dataSource:v["a"].getDictonary().data.region_code,onValueChanged:function(e){var t=e.value;t&&t.length>0?n.dxForm1.getEditor("free_exclude_region_codes_arr").option({disabled:!0}):n.dxForm1.getEditor("free_exclude_region_codes_arr").option({disabled:!1})}}},{dataField:"free_exclude_region_codes_arr",label:{text:"免费排除地区"},editorType:"dxTagBox",editorOptions:{placeholder:"请选择排除地区.",displayExpr:"name",valueExpr:"id",showSelectionControls:!0,applyValueMode:"useButtons",dataSource:v["a"].getDictonary().data.region_code,onValueChanged:function(e){var t=e.value;t&&t.length>0?n.dxForm1.getEditor("free_include_region_codes_arr").option({disabled:!0}):n.dxForm1.getEditor("free_include_region_codes_arr").option({disabled:!1})}}}]),this.dxForm1=this.getDxInstanceByKey("dxForm1"),this.dxForm1.option({items:r,formData:this.formData});case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"show",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]?n[1]:0,this.options.visible=!0,this.options.onHidden=t.onHidden,!(a>0)){e.next=12;break}return e.next=6,this.WallpaperApi.getWallDetailList(a);case 6:r=e.sent,this.formData=r.data,this.formData.free_include_region_codes_arr=this.getRegionCode(this.formData.free_include_region_codes),this.formData.free_exclude_region_codes_arr=this.getRegionCode(this.formData.free_exclude_region_codes),this.iImageNode.attr("src",this.uploadApi.getUploadHttp+this.formData.img_url),this.dxForm1.option({formData:r.data});case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(x["a"]);k=d["a"]([Object(p["a"])({components:{DxDataGrid:h["DxDataGrid"],DxForm:h["DxForm"],DxPopup:h["DxPopup"],DxScrollView:h["DxScrollView"]}})],k);var D=k,R=D,O=R,F=a("17cc"),j=Object(F["a"])(O,w,b,!1,null,null,null),E=j.exports,S=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.dxDataGridKey1="dxDataGridKey1",e.WallpaperApi=new m["a"],e}return Object(c["a"])(t,e),Object(s["a"])(t,[{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$parent.content_title="壁纸管理",this.initComponents(),this.getDataList();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initComponents",value:function(){this.dxDataGrid1=this.getDxInstanceByKey(this.dxDataGridKey1);var e=[{dataField:"id",caption:"编号",width:50},{dataField:"title",caption:"壁纸名称",width:120},{dataField:"size",caption:"壁纸大小",width:80},{dataField:"pixel_x",caption:"壁纸像素宽",width:80},{dataField:"pixel_y",caption:"壁纸像素高",width:80},{dataField:"download_num",caption:"下载次数",width:80},{allowFiltering:!1,allowSorting:!1,dataField:"order",caption:"排序",width:80},{dataField:"is_free",caption:"是否免费",cellTemplate:function(e,t){var a=0==t.value?"red":"green";g()("<span style='color:"+a+"'>").append(v["a"].getDicText(v["a"].getDictonary().data.flag,t.value)).appendTo(e)},width:80},{dataField:"is_top",caption:"是否置顶",cellTemplate:function(e,t){var a=0==t.value?"red":"green";g()("<span style='color:"+a+"'>").append(v["a"].getDicText(v["a"].getDictonary().data.flag,t.value)).appendTo(e)},width:80},{dataField:"is_hot",caption:"是否热门",cellTemplate:function(e,t){var a=0==t.value?"red":"green";g()("<span style='color:"+a+"'>").append(v["a"].getDicText(v["a"].getDictonary().data.flag,t.value)).appendTo(e)},width:80},{dataField:"download_url",caption:"壁纸视频连接地址",width:200},{dataField:"type",caption:"壁纸类型",width:80},{fixed:!0,fixedPosition:"right",dataField:"id",alignment:"center",caption:"操作",width:200,cellTemplate:this.CellEdit}],t=this.getDataGridOption({onToolbarPreparing:this.onToolbarPreparingHandler,columns:e,onRowClick:this.onRowClickHandler});this.dxDataGrid1.option(t)}},{key:"onRowClickHandler",value:function(e){var t=this;this.dbClick(function(){t.redirect("/sell/news/label/edit/"+e.key.id)})}},{key:"CellEdit",value:function(e,t){var a=this,r=this.getCreateLink("编辑",function(e){a.$refs["myEdit"].show({onHidden:function(e){e&&a.dxDataGrid1.refresh()}},t.value)}),n=this.getCreateLink("删除",function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.delWall(t.value);case 2:a.getDataList();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());g()("<div>").append(r).append(" | ").append(n).appendTo(e)}},{key:"delWall",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.confirm("确认删除？");case 2:if(!e.sent){e.next=7;break}return e.next=5,this.WallpaperApi.setWallDelete(t);case 5:a=e.sent,a.code==y["a"].OK||a.code==y["a"].isSame||a.code==y["a"].isSameSaveData?this.toast(function(){},a.msg):this.errorCodeMsg(a.code,a.msg);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onToolbarPreparingHandler",value:function(e){var t=this,a=(e.component,e.toolbarOptions.items);a.push({location:"before",widget:"dxButton",options:{text:"添加",icon:"add",onClick:this.onAddHandler}}),a.push({location:"before",widget:"dxButton",options:{text:"刷新",icon:"refresh",onClick:this.onRefreshHandler}}),this.createSearchToolbars(a,this.dxDataGrid1.option("columns"),function(){t.getDataList()})}},{key:"onRefreshHandler",value:function(e){this.dxDataGrid1.refresh()}},{key:"onAddHandler",value:function(e){var t=this;this.$refs["myEdit"].show({onHidden:function(e){e&&t.dxDataGrid1.refresh()}})}},{key:"getDataList",value:function(){var e=this,t=this.getDataGridPager(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(a,r,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.WallpaperApi.getWallListPager(a,r,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,a,r){return t.apply(this,arguments)}}());this.dxDataGrid1.option({remoteOperations:!0,dataSource:t})}}]),t}(x["a"]);S=d["a"]([Object(p["a"])({components:{DxDataGrid:h["DxDataGrid"],DxForm:h["DxForm"],myEdit:E}})],S);var C=S,T=C,G=T,W=Object(F["a"])(G,r,n,!1,null,null,null);t["default"]=W.exports},ef99:function(e,t,a){"use strict";a.d(t,"a",function(){return c});a("4453");var r=a("ee95"),n=a("eb12"),i=a("ba94"),o=a("5ee8"),s=a("4e86"),l=a("5bc3"),u=a("f322"),c=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(i["a"])(t,[{key:"getListPager",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",a=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,n="/staff/wallpaper/cate?account_token="+this.token+"&size="+a+"&page="+r+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",t="/staff/wallpaper/cate/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/wallpaper/cate",r=t,e.next=4,this.httpPost(a,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/wallpaper/cate/"+t,n=a,e.next=4,this.httpPut(r,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getDetailList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/wallpaper/cate/"+t+"?account_token="+this.token,e.next=3,this.httpGet(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/wallpaper/cate/"+t,r="account_token="+this.token+"&ids="+t,e.next=4,this.httpDelete(a+"?"+r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWallListPager",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",a=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,n="/staff/wallpaper?account_token="+this.token+"&size="+a+"&page="+r+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setWallDelete",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/wallpaper/"+t,r="account_token="+this.token+"&ids="+t,e.next=4,this.httpDelete(a+"?"+r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCateSimpleList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="/staff/wallpaper/cate/lists?account_token="+this.token,e.next=3,this.httpGet(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setWallAdd",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/wallpaper",r=t,e.next=4,this.httpPost(a,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setWallUpdate",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/wallpaper/"+t,n=a,e.next=4,this.httpPut(r,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getWallDetailList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/wallpaper/"+t+"?account_token="+this.token,e.next=3,this.httpGet(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(u["a"])}}]);