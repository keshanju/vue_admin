(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-530c6be1"],{"4cf0":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DxDataGrid",{ref:t.dxDataGridKey1})],1)},a=[],i=(n("48fb"),n("4453"),n("ee95")),u=n("eb12"),c=n("ba94"),o=n("5ee8"),s=n("4e86"),p=n("5bc3"),h=n("3a61"),d=n("b2e6"),l=n("a60a"),f=n.n(l),v=n("74a9"),m=n("1639"),b=n("f322"),g=function(t){function e(){return Object(u["a"])(this,e),Object(o["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(p["a"])(e,t),Object(c["a"])(e,[{key:"getListPager",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){var r,a,i,u,c,o=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:"",a=o.length>3&&void 0!==o[3]?o[3]:15,i=o.length>4&&void 0!==o[4]?o[4]:1,u="/staff/member/".concat(e,"/points?account_token=").concat(this.token,"&database_num=").concat(n,"&size=").concat(a,"&page=").concat(i).concat(r),t.next=6,this.httpGet(u);case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"changeUserPoints",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n,r){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="/staff/member/".concat(e,"/points"),r.account_token=this.token,r.database_num=n,t.next=5,this.httpPutJson(a,r);case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}},t,this)}));function e(e,n,r){return t.apply(this,arguments)}return e}()}]),e}(b["a"]),w=n("4b0b"),x=n("6d58"),y=n("9b13"),k=function(t){function e(){var t;return Object(u["a"])(this,e),t=Object(o["a"])(this,Object(s["a"])(e).apply(this,arguments)),t.dxDataGridKey1="dxDataGridKey1",t.userPointsShortAPI=new g,t.dbNum="001",t}return Object(p["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.dbNum=this.getParam("db_num"),this.initComponent(),this.getUserPointShortList();case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"initComponent",value:function(){this.dxDataGrid1=this.getDxInstanceByKey(this.dxDataGridKey1);var t=[{dataField:"user_mobile_num",caption:"所属用户",width:150,cellTemplate:function(t,e){var n=f()("<span>");e.value&&""!=e.value.toString()&&e.data.country_code&&""!=e.data.country_code.toString()&&n.append("(+"+e.data.country_code+")"),n.append(e.value),n.appendTo(t)}},{dataField:"user_mail",caption:"邮箱",width:150},{dataField:"user_name",caption:"账号",width:100},{dataField:"user_nickname",caption:"昵称",width:100},{dataField:"activity_title",caption:"所属活动",width:180},{dataField:"points",caption:"积分",width:180},{dataField:"expiry_time",caption:"过期时间",width:180},{dataField:"create_time",caption:"创建时间",width:160}],e=this.getDataGridOption({onToolbarPreparing:this.onToolbarPreparingHandler,columns:t});this.dxDataGrid1.option(e)}},{key:"getUserPointShortList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this.getDataGridPager(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,r,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.userPointsShortAPI.getListPager(n.ID,n.dbNum,e,r,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()),this.dxDataGrid1.option({remoteOperations:!0,dataSource:e});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"onToolbarPreparingHandler",value:function(t){var e=this,n=(t.component,t.toolbarOptions.items);n.push({location:"before",widget:"dxButton",options:{text:"添加积分",icon:"add",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var n,r,a,u,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={points:0},t.next=3,(new x["a"]).getList();case 3:r=t.sent,a=r.data,u=e.createFormItems([{dataField:"activity_id",editorType:"dxSelectBox",label:{text:"活动"},editorOptions:{placeholder:"请选择有效的活动",dataSource:a,displayExpr:"title",valueExpr:"id"},validationRules:[w["a"].getRequired("请选择有效的活动!")]},{dataField:"points",editorType:"dxNumberBox",label:{text:"积分(可负数)"},editorOptions:{placeholder:"请输入有效的积分,支持负数"},validationRules:[w["a"].getRequired("请输入有效的积分!")]},{dataField:"staff_operate_desc",editorType:"dxTextArea",label:{text:"操作理由"},editorOptions:{placeholder:"操作理由说明!",height:80},validationRules:[w["a"].getRequired("操作理由说明不能为空!")]}]),c=e.createPopForm({title:"增加删除用户活动积分",width:400,height:280},{formData:n,items:u},{hasReset:!1},function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(n,r){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=c.option("formData"),t.next=4,(new g).changeUserPoints(e.ID,e.dbNum,a);case 4:i=t.sent,i.code==y["a"].OK||i.code==y["a"].isSame||i.code==y["a"].isSameSaveData?e.toast(function(){return r.hide(),e.dxDataGrid1.refresh(),!0}):e.errorCodeMsg(i.code,i.msg),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error(t.t0);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,n){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}},t)}));function n(){return t.apply(this,arguments)}return n}()}}),n.push({location:"before",widget:"dxButton",options:{icon:"refresh",text:"刷新",onClick:this.onRefreshHandler}}),n.push({location:"before",widget:"dxButton",options:{text:"返回用户管理",icon:"back",onClick:this.onAddHandler}})}},{key:"onAddHandler",value:function(t){this.redirect("/user/list")}},{key:"onRefreshHandler",value:function(t){this.dxDataGrid1.refresh()}}]),e}(m["a"]);k=h["a"]([Object(d["a"])({components:{DxDataGrid:v["DxDataGrid"]}})],k);var R=k,O=R,j=O,_=n("17cc"),D=Object(_["a"])(j,r,a,!1,null,null,null);e["default"]=D.exports},"6d58":function(t,e,n){"use strict";n.d(e,"a",function(){return p});n("4453");var r=n("ee95"),a=n("eb12"),i=n("ba94"),u=n("5ee8"),c=n("4e86"),o=n("5bc3"),s=n("f322"),p=function(t){function e(){return Object(a["a"])(this,e),Object(u["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),Object(i["a"])(e,[{key:"getListPager",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r,a,i,u=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:"",n=u.length>1&&void 0!==u[1]?u[1]:15,r=u.length>2&&void 0!==u[2]?u[2]:1,a="/staff/activity?account_token="+this.token+"&size="+n+"&page="+r+e,t.next=6,this.httpGet(a);case 6:return i=t.sent,t.abrupt("return",i);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",e="/staff/activity/lists?account_token="+this.token,t.next=4,this.httpGet(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setAdd",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/activity",r=e,t.next=4,this.httpPost(n,r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setUpdate",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,n){var r,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r="/staff/activity/"+e,a=n,t.next=4,this.httpPut(r,a);case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"setDelete",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/activity/"+e,r="account_token="+this.token+"&ids="+e,t.next=4,this.httpDelete(n+"?"+r);case 4:t.sent;case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getModel",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/activity/"+e,r="account_token="+this.token,t.next=4,this.httpGet(n+"?"+r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setStatic",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="/staff/activity/static",n="account_token="+this.token,t.next=4,this.httpGet(e+"?"+n);case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setActiveStatus",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/activity/".concat(e,"/release"),r="account_token="+this.token,t.next=4,this.httpPost(n,r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setActiveStatusCancel",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="/staff/activity/".concat(e,"/release"),r="account_token="+this.token,t.next=4,this.httpDelete(n+"?"+r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(s["a"])}}]);