(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-577bce3b"],{"2b2a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DxForm",{ref:e.dxFormKey1})],1)},n=[],i=(a("4453"),a("ee95")),o=a("eb12"),s=a("ba94"),d=a("5ee8"),c=a("4e86"),u=a("5bc3"),l=a("3a61"),p=a("b2e6"),h=a("74a9"),m=a("a60a"),x=a.n(m),g=a("1639"),y=a("6d58"),v=(a("3656"),a("4c5d")),_=a("0163"),f=a("9b13"),b=a("4b0b"),F=a("3ebb"),D=a("71e4"),k=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(d["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.dxFormKey1="dxFormKey1",e.dxFormData1={id:0,start_time:F["b"].getNow("yyyy-MM-dd HH:mm:ss"),end_time:F["b"].getNow("yyyy-MM-dd HH:mm:ss"),url_type:0,include_region_codes:"",include_region_codes_arr:[],exclude_region_codes:"",exclude_region_codes_arr:[],attend_num_appoint:1,attend_num_randon:0,is_pay_user:0},e.dxFormDataReset1={},e.newsAPI=new y["a"],e.uploadApi=new _["a"],e}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$parent.content_title="活动编辑",!(this.ID>f["a"].zero)){e.next=8;break}return e.next=4,this.newsAPI.getModel(this.ID);case 4:t=e.sent,this.dxFormData1=t.data,this.dxFormData1.include_region_codes_arr=this.getRegionCode(this.dxFormData1.include_region_codes),this.dxFormData1.exclude_region_codes_arr=this.getRegionCode(this.dxFormData1.exclude_region_codes);case 8:if(this.initComponents(),!(this.ID>f["a"].zero)){e.next=13;break}return e.next=12,this.getDataModel(this.ID);case 12:this.iImageNode.attr("src",this.uploadApi.getUploadHttp+this.dxFormData1.image);case 13:this.dxFormDataReset1=x.a.extend(!0,{},this.dxFormData1);case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initComponents",value:function(){var e=this;this.dxForm1=this.getDxInstanceByKey(this.dxFormKey1);var t=[{itemType:"group",items:[{dataField:"title",label:{text:"标题"},editorOptions:{placeholder:"请输入标题"},validationRules:[b["a"].getRequired("标题不能为空!")]},{dataField:"seo_keywords",label:{text:"SEO关键词"},editorOptions:{placeholder:"请输入SEO关键词"}},{dataField:"seo_desc",label:{text:"SEO描述信息"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入SEO描述信息",height:120}},{dataField:"fee",label:{text:"所需积分"},editorType:"dxNumberBox",editorOptions:{placeholder:"请输入积分",value:0,min:0},validationRules:[b["a"].getRequired("请输入积分!")]},{dataField:"type",label:{text:"类别"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择分类类别",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.activity_type},validationRules:[b["a"].getRequired("分类类别能为空!")]},{dataField:"attend_num_appoint",label:{text:"指定抽奖类型"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择分类类别",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.attend_appoint_type},validationRules:[]},{dataField:"attend_num_randon",label:{text:"随机抽奖次数"},editorType:"dxNumberBox",editorOptions:{placeholder:"请输入随机奖品次数",value:0,min:0},validationRules:[]},{dataField:"is_pay_user",label:{text:"活动是否只对付费用户有效"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择是否",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.flag},validationRules:[]},{dataField:"plat_type",label:{text:"支持类型"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择支持类型",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.support_type},validationRules:[b["a"].getRequired("支持类型不能为空!")]},{dataField:"label",label:{text:"标签"},editorOptions:{placeholder:"请输入标签信息"},validationRules:[b["a"].getRequired("标签不能为空!")]},this.createUploadFileFormItem(function(t){e.iImageNode=t},{dataField:"image",label:{text:"活动图片"},validationRules:[b["a"].getRequired("活动图片不能为空")]},{name:"filename",uploadUrl:this.uploadApi.getUploadNormalPath("images")}),{dataField:"summary",label:{text:"活动简介"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入活动简介",height:120},validationRules:[b["a"].getRequired("活动简介不能为空!")]},this.createUploadFileFormItem(function(t){null!=e.UE&&e.UE.execCommand("insertHtml",'<img src="'+t+'" />')},{label:{text:"插入图片"}},{name:"filename",uploadUrl:this.uploadApi.getUploadNormalPath("images")},!1),D["a"].createUEEditor({dataField:"content",label:{text:"详细"},editorOptions:{placeholder:"请输入详细内容"},validationRules:[b["a"].getRequired("详细内容能为空!")]},function(t){e.UE=t}),D["a"].createUEEditor({dataField:"prize",label:{text:"奖品"},editorOptions:{placeholder:"请输入奖品信息",height:150}},function(t){e.UEPrice=t}),{dataField:"start_time",label:{text:"开始时间"},editorType:"dxDateBox",editorOptions:{placeholder:"请输入开始时间",type:"datetime",displayFormat:"yyyy-MM-dd HH:mm:ss",dateSerializationFormat:"yyyy-MM-dd HH:mm:ss",showClearButton:!0},validationRules:[b["a"].getRequired("开始时间不能为空!")]},{dataField:"end_time",label:{text:"结束时间"},editorType:"dxDateBox",editorOptions:{placeholder:"请输入结束时间",type:"datetime",displayFormat:"yyyy-MM-dd HH:mm:ss",dateSerializationFormat:"yyyy-MM-dd HH:mm:ss",showClearButton:!0},validationRules:[b["a"].getRequired("结束时间不能为空!")]},{dataField:"hits",label:{text:"点击次数"},editorType:"dxNumberBox",editorOptions:{min:0,value:0},validationRules:[b["a"].getRequired("点击次数不能为空!")]},{dataField:"url_type",label:{text:"是否链接"},editorType:"dxSelectBox",editorOptions:{displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.flag},validationRules:[b["a"].getRequired("链接不能为空!")]},{dataField:"url",label:{text:"链接"},editorOptions:{},validationRules:[b["a"].getHttp()]},{dataField:"include_region_codes_arr",label:{text:"活动包含地区"},editorType:"dxTagBox",editorOptions:{placeholder:"请选择包含地区.",displayExpr:"name",valueExpr:"id",showSelectionControls:!0,applyValueMode:"useButtons",dataSource:v["a"].getDictonary().data.region_code,onValueChanged:function(t){var a=t.value;a&&a.length>0?e.dxForm1.getEditor("exclude_region_codes_arr").option({disabled:!0}):e.dxForm1.getEditor("exclude_region_codes_arr").option({disabled:!1})}}},{dataField:"exclude_region_codes_arr",label:{text:"活动排除地区"},editorType:"dxTagBox",editorOptions:{placeholder:"请选择排除地区.",displayExpr:"name",valueExpr:"id",showSelectionControls:!0,applyValueMode:"useButtons",dataSource:v["a"].getDictonary().data.region_code,onValueChanged:function(t){var a=t.value;a&&a.length>0?e.dxForm1.getEditor("include_region_codes_arr").option({disabled:!0}):e.dxForm1.getEditor("include_region_codes_arr").option({disabled:!1})}}}]},{itemType:"group",colCount:3,items:[{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:this.ID>f["a"].zero?"更新":"添加",type:"success",useSubmitBehavior:!0,onClick:this.onClickDoHandler}},{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:"重置",type:"normal",onClick:this.onResetHandler}},{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:"返回",type:"normal",onClick:this.onClickBackHandler}}]}],a={formData:this.dxFormData1,items:t,width:1e3,validationGroup:"customerData"};this.dxForm1.option(a)}},{key:"onResetHandler",value:function(e){this.dxFormData1=x.a.extend(!0,{},this.dxFormDataReset1),this.dxForm1.option("formData",this.dxFormData1)}},{key:"getDataModel",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.newsAPI.getModel(t);case 2:a=e.sent,this.dxFormData1=a.data,this.dxFormData1.include_region_codes_arr=this.getRegionCode(this.dxFormData1.include_region_codes),this.dxFormData1.exclude_region_codes_arr=this.getRegionCode(this.dxFormData1.exclude_region_codes),this.dxForm1.option({formData:this.dxFormData1});case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onClickDoHandler",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.validateForm(this.dxForm1)){e.next=3;break}return e.abrupt("return");case 3:if(this.dxFormData1.account_token=this.token,this.dxFormData1.include_region_codes=this.dxFormData1.include_region_codes_arr.join(","),this.dxFormData1.exclude_region_codes=this.dxFormData1.exclude_region_codes_arr.join(","),a=this.joinFormParams(this.dxFormData1),this.dxFormData1.include_region_codes&&""!=this.dxFormData1.include_region_codes?a+="&exclude_region_codes=":this.dxFormData1.exclude_region_codes&&""!=this.dxFormData1.exclude_region_codes?a+="&include_region_codes=":a+="&include_region_codes=&exclude_region_codes=",this.dxFormData1.id!=f["a"].zero){e.next=14;break}return e.next=11,this.newsAPI.setAdd(a);case 11:r=e.sent,e.next=17;break;case 14:return e.next=16,this.newsAPI.setUpdate(this.ID,a);case 16:r=e.sent;case 17:r.code==f["a"].OK||r.code==f["a"].isSame||r.code==f["a"].isSameSaveData?this.toast(function(){n.redirect("/sell/activity/list")}):this.errorCodeMsg(r.code,r.msg),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](0),this.error(e.t0);case 23:case"end":return e.stop()}},e,this,[[0,20]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onClickBackHandler",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.redirect("/sell/activity/list");case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(g["a"]);k=l["a"]([Object(p["a"])({components:{DxDataGrid:h["DxDataGrid"],DxForm:h["DxForm"]}})],k);var R=k,w=R,O=w,E=a("17cc"),j=Object(E["a"])(O,r,n,!1,null,null,null);t["default"]=j.exports},"6d58":function(e,t,a){"use strict";a.d(t,"a",function(){return u});a("4453");var r=a("ee95"),n=a("eb12"),i=a("ba94"),o=a("5ee8"),s=a("4e86"),d=a("5bc3"),c=a("f322"),u=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),Object(i["a"])(t,[{key:"getListPager",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",a=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,n="/staff/activity?account_token="+this.token+"&size="+a+"&page="+r+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",t="/staff/activity/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/activity",r=t,e.next=4,this.httpPost(a,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/activity/"+t,n=a,e.next=4,this.httpPut(r,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/activity/"+t,r="account_token="+this.token+"&ids="+t,e.next=4,this.httpDelete(a+"?"+r);case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/activity/"+t,r="account_token="+this.token,e.next=4,this.httpGet(a+"?"+r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setStatic",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="/staff/activity/static",a="account_token="+this.token,e.next=4,this.httpGet(t+"?"+a);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setActiveStatus",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/activity/".concat(t,"/release"),r="account_token="+this.token,e.next=4,this.httpPost(a,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setActiveStatusCancel",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/activity/".concat(t,"/release"),r="account_token="+this.token,e.next=4,this.httpDelete(a+"?"+r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(c["a"])}}]);