(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cb2c0ca"],{"22c6":function(e,t,a){"use strict";a.d(t,"a",function(){return c});a("4453");var r=a("ee95"),n=a("eb12"),i=a("ba94"),o=a("5ee8"),s=a("4e86"),d=a("5bc3"),l=a("f322"),c=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),Object(i["a"])(t,[{key:"getListPager",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",a=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,n="/staff/server?account_token="+this.token+"&size="+a+"&page="+r+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",a="/staff/server/lists?account_token="+this.token+"&"+t,e.next=4,this.httpGet(a);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/server",r=t,e.next=4,this.httpPost(a,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/server/"+t,n=a,e.next=4,this.httpPutJson(r,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/server/"+t,r="account_token="+this.token,e.next=4,this.httpDelete(a+"?"+r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/server/"+t,r="account_token="+this.token,e.next=4,this.httpGet(a+"?"+r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setBatUpdateState",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/server/status",r=t,e.next=4,this.httpPutJson(a,r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdateServerOnline",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="/staff/server/checkOnline",a="account_token="+this.token,e.next=4,this.httpPost(t,a);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getServerNodeError",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:1,n=s.length>3&&void 0!==s[3]?s[3]:15,i="/staff/statistics/speed/node/error?account_token=".concat(this.token,"&page=").concat(r,"&size=").concat(n,"&start_time=").concat(t,"&end_time=").concat(a),e.next=5,this.httpGet(i);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()}]),t}(l["a"])},"3dae":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DxDataGrid",{ref:e.dxDataGridKey1}),a("server_node_error",{ref:"server_node_error"})],1)},n=[],i=a("77fe"),o=a.n(i),s=(a("ea65"),a("b06f"),a("4453"),a("ee95")),d=a("eb12"),l=a("ba94"),c=a("5ee8"),u=a("4e86"),p=a("5bc3"),h=a("3a61"),v=a("b2e6"),m=a("74a9"),f=a("a60a"),g=a.n(f),x=a("1639"),b=a("22c6"),y=a("4c5d"),w=a("4b0b"),_=a("9b13"),k=a("87fa"),D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dx-popup",{attrs:{visible:e.options.visible,title:e.options.title,toolbarItems:e.options.toolbarItems,width:e.options.width,height:e.options.height,onHidden:e.options.onHidden},on:{"update:visible":function(t){return e.$set(e.options,"visible",t)}}},[a("dx-scroll-view",[a("dx-form",{ref:"dxSearchForm1"}),a("br"),a("dx-data-grid",{ref:"dxDataGrid1"})],1)],1)},R=[],F=(a("48fb"),a("3ebb")),O=function(e){function t(){var e;return Object(d["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.options={visible:!1,title:"加速服务器节点错误列表",toolbarItems:[],width:g()(window).width()-200,height:g()(window).height()-200,onHidden:function(){}},e}return Object(p["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){var e=this;g()(window).resize(function(){e.options.width=g()(window).width()-200,e.options.height=g()(window).height()-200})}},{key:"mounted",value:function(){var e=this;this.dxSearchForm1=this.getDxInstanceByKey("dxSearchForm1");var t=this.createFormItems([{dataField:"start_time",label:{text:"开始时间"},editorType:"dxDateBox",editorOptions:{type:"datetime",displayFormat:"yyyy-MM-dd 00:00:00",dateSerializationFormat:"yyyy-MM-dd 00:00:00",value:F["b"].getNow("yyyy-MM-dd 00:00:00")},validationRules:[w["a"].getRequired("请选择开始时间!")]},{dataField:"end_time",label:{text:"结束时间"},editorType:"dxDateBox",editorOptions:{type:"datetime",displayFormat:"yyyy-MM-dd 23:59:59",dateSerializationFormat:"yyyy-MM-dd 23:59:59",value:F["b"].getNow("yyyy-MM-dd 23:59:59")},validationRules:[w["a"].getRequired("请选择结束时间!")]},{itemType:"button",horizontalAlignment:"left",buttonOptions:{text:"查询",icon:"search",type:"success",onClick:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.validateForm(e.dxSearchForm1)){t.next=2;break}return t.abrupt("return");case 2:a=e.dxSearchForm1.option("formData"),e.getDataList(a.start_time,a.end_time);case 4:case"end":return t.stop()}},t)}));function a(){return t.apply(this,arguments)}return a}()}}]);this.dxSearchForm1.option({colCount:6,items:t}),this.dxDataGrid1=this.getDxInstanceByKey("dxDataGrid1");var a=this.createDataGridColumns([{dataField:"id",caption:"编号",width:80},{allowFiltering:!0,allowSorting:!0,dataField:"user_mobile_num",caption:"手机号",width:150,cellTemplate:function(e,t){var a=g()("<span>");t.value&&""!=t.value.toString()&&t.data.country_code&&""!=t.data.country_code.toString()&&a.append("(+"+t.data.country_code+")"),a.append(t.value),a.appendTo(e)}},{dataField:"user_mail",caption:"邮箱",width:150},{dataField:"user_name",caption:"账号",width:100},{dataField:"user_nickname",caption:"昵称",width:100},{dataField:"speed_ip",caption:"加速IP",width:120},{dataField:"speed_port",caption:"加速端口",width:120},{dataField:"client_ip",caption:"客户端IP",width:120},{dataField:"hardware_id",caption:"硬件号",width:120},{dataField:"os_type",caption:"设备类型",width:120,cellTemplate:function(e,t){g()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.client_os_type,t.value)).appendTo(e)}}]),r=this.getDataGridOption({columns:a,columnChooser:{enabled:!1}});this.dxDataGrid1.option(r)}},{key:"Show",value:function(){this.options.visible=!0}},{key:"getDataList",value:function(e,t){var a=this.getDataGridPager(function(){var a=Object(s["a"])(regeneratorRuntime.mark(function a(r,n,i){var o;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(new b["a"]).getServerNodeError(e,t,i,n);case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},a)}));return function(e,t,r){return a.apply(this,arguments)}}());this.dxDataGrid1.option({remoteOperations:!0,dataSource:a})}}]),t}(x["a"]);O=h["a"]([Object(v["a"])({components:{DxDataGrid:m["DxDataGrid"],DxForm:m["DxForm"],DxTreeView:m["DxTreeView"],DxPopup:m["DxPopup"],DxScrollView:m["DxScrollView"]}})],O);var S=O,T=S,M=a("17cc"),j=Object(M["a"])(T,D,R,!1,null,null,null),P=j.exports,G=function(e){function t(){var e;return Object(d["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.dxDataGridKey1="dxDataGridKey1",e.serverAPI=new b["a"],e.dxFormData1={},e.dxFormDataReset2={id:0,is_valid:1,is_online:1,online_users:0,server_type:0,s5_port:443,s5_end_port:443,s5_mobile_port:1443,s5_mobile_end_port:1443,lan_delay:0,lan_loss:0,online_max_users:1e3,ikv2_connect_port:0,ikv2_transfer_port:0,pptp_port:0,l2tp_port:0,is_auto_latitude:0,latitude:"0",longitude:"0",isp:""},e}return Object(p["a"])(t,e),Object(l["a"])(t,[{key:"mounted",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$parent.content_title="服务器管理",this.initComponents(),this.getDataList();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initComponents",value:function(){this.dxDataGrid1=this.getDxInstanceByKey(this.dxDataGridKey1);var e=[{dataField:"id",caption:"编号",width:80},{dataField:"server",caption:"主机/IP",width:120},{dataField:"title",caption:"标题",width:120},{dataField:"is_valid",caption:"是否有效",cellTemplate:function(e,t){var a=0==t.value?"red":"green";g()("<span style='color:"+a+"'>").append(y["a"].getDicText(y["a"].getDictonary().data.flag,t.value)).appendTo(e)},width:80},{dataField:"desc",caption:"备注",width:100},{dataField:"online_users",caption:"在线人数",width:100},{dataField:"online_max_users",caption:"最大允许人数",width:120},{dataField:"server_type",caption:"服务器类型",width:100,cellTemplate:function(e,t){g()("<span>").append(y["a"].getDicText(y["a"].getDictonary().data.server_type,t.value)).appendTo(e)}},{dataField:"s5_port",caption:"服务端口",width:120},{dataField:"s5_end_port",caption:"s5出端口",width:120},{dataField:"lan_delay",caption:"专线延迟",width:120},{dataField:"lan_loss",caption:"内网丢包率",width:120},{dataField:"s5_mobile_port",caption:"移动端端口",width:120},{dataField:"s5_mobile_end_port",caption:"s5移动版出端口",width:120},{dataField:"is_online",caption:"是否可用于分配",width:120,cellTemplate:function(e,t){var a=0==t.value?"red":"green";g()("<span style='color:"+a+"'>").append(y["a"].getDicText(y["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"ikv2_connect_port",caption:"建立连接端口",width:120},{dataField:"ikv2_transfer_port",caption:"数据传输端口",width:120},{dataField:"pptp_port",caption:"PPTP端口",width:120},{dataField:"l2tp_port",caption:"L2TP端口",width:120},{visible:!1,dataField:"create_time",caption:"创建时间",width:160},{visible:!1,dataField:"create_staff_name",caption:"创建人",width:80},{visible:!1,dataField:"change_time",caption:"修改时间",width:160},{visible:!1,dataField:"change_staff_name",caption:"修改人",width:80},{fixed:!0,fixedPosition:"right",dataField:"id",alignment:"center",caption:"操作",width:200,cellTemplate:this.CellEdit}],t=this.getDataGridOption({onToolbarPreparing:this.onToolbarPreparingHandler,columns:e,onRowClick:this.onRowClickHandler,export:{enabled:!0},selection:{mode:"multiple",selectAllMode:"page",showCheckBoxesMode:"always"}});this.dxDataGrid1.option(t)}},{key:"onRowClickHandler",value:function(e){var t=this;this.dbClick(function(){t.redirect("/server/edit/"+e.key.id)})}},{key:"CellEdit",value:function(e,t){var a=this,r=g()("<a data='"+t.value+"'>编辑</a>");r.bind("click",function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=Number(g()(t.target).attr("data")),e.next=3,a.serverAPI.getModel(r);case 3:n=e.sent,i=n.data,i.match_groups=(i.match_groups+"").trim(),a.showEditForm(i);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var n=this.getCreateLink("删除",function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.confirm("是否确定删除?");case 2:if(n=e.sent,!n){e.next=8;break}return e.next=6,a.serverAPI.setDelete(Number(t.value));case 6:i=e.sent,i.code==_["a"].OK||i.code==_["a"].isSame||i.code==_["a"].isSameSaveData?a.toast(function(){a.dxDataGrid1.refresh()}):a.errorCodeMsg(i.code,i.msg);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());g()("<div>").append(r).append(" | ").append(n).appendTo(e)}},{key:"onToolbarPreparingHandler",value:function(e){var t=this,a=e.toolbarOptions.items;a.push({location:"before",widget:"dxButton",options:{text:"添加",icon:"add",onClick:function(e){t.showEditForm(t.dxFormDataReset2)}}}),a.push({location:"before",widget:"dxButton",options:{text:"刷新",icon:"refresh",onClick:this.onRefreshHandler}}),a.push({location:"before",widget:"dxButton",options:{text:"批量更新状态",icon:"refresh",onClick:this.onBatUpdateServerStatus}}),a.push({location:"before",widget:"dxButton",options:{text:"服务器人数更新",icon:"edit",onClick:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(new b["a"]).setUpdateServerOnline();case 2:a=e.sent,a.code==_["a"].zero?(t.alert("重置成功!"),t.dxDataGrid1.refresh()):t.alert(a.msg);case 4:case"end":return e.stop()}},e)}));function a(){return e.apply(this,arguments)}return a}()}}),a.push({location:"before",widget:"dxButton",options:{text:"加速服务器错误",icon:"rowfield",type:"danger",onClick:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.$refs["server_node_error"].Show();case 1:case"end":return e.stop()}},e)}));function a(){return e.apply(this,arguments)}return a}()}}),this.createSearchToolbars(a,this.dxDataGrid1.option("columns"),function(){t.getDataList()},"title",k["a"].contain)}},{key:"showEditForm",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0,match_groups:""},a=[{name:"0",id:0},{name:"1",id:1},{name:"2",id:2},{name:"3",id:3},{name:"4",id:4},{name:"5",id:5},{name:"6",id:6},{name:"7",id:7},{name:"8",id:8},{name:"9",id:9}],r=this.createFormItems([{itemType:"group",colCount:2,items:[{colSpan:2,dataField:"title",label:{text:"服务器名称"},editorOptions:{placeholder:"请输入服务器名称"},validationRules:[w["a"].getRequired("服务器名称不能为空!")]},{colSpan:2,dataField:"server",label:{text:"服务器IP地址"},editorOptions:{placeholder:"请输入服务器IP地址"},validationRules:[w["a"].getRequired("服务器ip地址不能为空!"),w["a"].getIP("服务器IP地址不正确!")]},{colSpan:2,dataField:"match_groups_arr",label:{text:"服务器组"},editorType:"dxTagBox",editorOptions:{placeholder:"请选择服务器组信息!,为空作为所有.",displayExpr:"name",valueExpr:"id",showSelectionControls:!0,applyValueMode:"useButtons",dataSource:a,onValueChanged:function(e){var a=e.value;null!=a&&a.length>0?t.match_groups=a.join(","):t.match_groups=""}},validationRules:[]},{colSpan:1,dataField:"is_valid",label:{text:"服务器是否有效"},editorType:"dxSelectBox",editorOptions:{displayExpr:"name",valueExpr:"id",dataSource:y["a"].getDictonary().data.valid},validationRules:[w["a"].getRequired("请选择服务器是否有效!")]},{colSpan:1,dataField:"online_max_users",label:{text:"服务器最大允许在线人数"},editorType:"dxNumberBox",editorOptions:{min:0},validationRules:[w["a"].getRequired("服务器最大允许在线人数")]},{colSpan:1,dataField:"server_type",label:{text:"服务器类型"},editorType:"dxSelectBox",editorOptions:{displayExpr:"name",valueExpr:"id",dataSource:y["a"].getDictonary().data.server_type},validationRules:[w["a"].getRequired("请选择服务器类型")]},{colSpan:1,dataField:"is_online",label:{text:"是否可用于分配"},editorType:"dxSelectBox",editorOptions:{displayExpr:"name",valueExpr:"id",dataSource:y["a"].getDictonary().data.flag},validationRules:[w["a"].getRequired("请选择是否可用于分配")]},{colSpan:1,dataField:"s5_port",label:{text:"服务端口"},editorType:"dxNumberBox",editorOptions:{min:0},validationRules:[w["a"].getRequired("服务端口不能为空!")]},{colSpan:1,dataField:"s5_end_port",label:{text:"结束端口"},editorType:"dxNumberBox",editorOptions:{min:0},validationRules:[w["a"].getRequired("s5出端口不能为空!")]},{colSpan:1,dataField:"s5_mobile_port",label:{text:"移动端服务端口"},editorType:"dxNumberBox",editorOptions:{min:0},validationRules:[w["a"].getRequired("移动端服务端口不能为空!")]},{colSpan:1,dataField:"s5_mobile_end_port",label:{text:"结束端口"},editorType:"dxNumberBox",editorOptions:{min:0},validationRules:[w["a"].getRequired("移动端服务出端口不能为空!")]},{colSpan:1,dataField:"lan_delay",label:{text:"专线延迟(ms)"},editorType:"dxNumberBox",editorOptions:{min:0},validationRules:[w["a"].getRequired("专线延迟不能为空")]},{colSpan:1,dataField:"lan_loss",label:{text:"内网丢包率(%)"},editorOptions:{min:0},validationRules:[w["a"].getRequired("内网丢包率不能为空")]},{colSpan:1,dataField:"ikv2_connect_port",label:{text:"连接端口"},editorOptions:{min:0},validationRules:[]},{colSpan:1,dataField:"ikv2_transfer_port",label:{text:"传输端口"},editorOptions:{min:0},validationRules:[]},{colSpan:1,dataField:"pptp_port",label:{text:"PPTP端口"},editorOptions:{min:0},validationRules:[]},{colSpan:1,dataField:"l2tp_port",label:{text:"L2TP端口"},editorOptions:{min:0},validationRules:[]},{colSpan:2,dataField:"l2tp_secret_key",label:{text:"共享秘钥"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入L2TP共享秘钥信息!",height:60},validationRules:[]},{colSpan:2,dataField:"desc",label:{text:"备注"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入备注信息!",height:100},validationRules:[]}]}]);if(t.id>0){var n=this.createFormItems([{itemType:"group",colCount:2,items:[{dataField:"is_auto_latitude",label:{text:"是否重新设置经纬度和运营商"},editorType:"dxCheckBox",editorOptions:{placeholder:"请选择是否信息.",displayExpr:"name",valueExpr:"id",dataSource:y["a"].getDictonary().data.flag,value:0},validationRules:[]},{dataField:"isp",label:{text:"运营商名称(isp)"},editorType:"dxTextBox",editorOptions:{placeholder:"请输入运营商名称(isp)."},validationRules:[]},{dataField:"latitude",label:{text:"维度"},editorOptions:{placeholder:"请输入经度信息!"},validationRules:[]},{dataField:"longitude",label:{text:"经度"},editorOptions:{placeholder:"请输入维度信息!"},validationRules:[]}]}]);r=r.concat(n)}var i=this.createPopForm({title:0==t.id?"添加服务器":"编辑服务器",maxWidth:1e3,maxHeight:880},{items:r,formData:t},{isAdd:0==t.id},function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(a,r){var n,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.validateForm(a)){t.next=3;break}return t.abrupt("return");case 3:if(n=a.option("formData"),n.account_token=e.token,n.match_groups&&null!=n.match_groups&&"null"!=n.match_groups||(n.match_groups=""),i=e.joinFormParams(n),n.id!=_["a"].zero){t.next=13;break}return t.next=10,e.serverAPI.setAdd(i);case 10:o=t.sent,t.next=16;break;case 13:return t.next=15,e.serverAPI.setUpdate(n.id,n);case 15:o=t.sent;case 16:if(o.code==_["a"].OK||o.code==_["a"].isSame||o.code==_["a"].isSameSaveData){t.next=21;break}return e.errorCodeMsg(o.code,o.msg),t.abrupt("return",!1);case 21:e.dxDataGrid1.refresh();case 22:t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](0),e.error(t.t0);case 27:return t.abrupt("return",!0);case 28:case"end":return t.stop()}},t,null,[[0,24]])}));return function(e,a){return t.apply(this,arguments)}}());if(t.id>0){i.getEditor("is_auto_latitude").option({value:0});var o=[];t.match_groups&&(o=t.match_groups.split(",")),i.getEditor("match_groups_arr").option({value:o})}}},{key:"onBatUpdateServerStatus",value:function(e){var t=this,a=this.dxDataGrid1.getSelectedRowsData();if(0!=a.length){var r=this.createFormItems([{dataField:"is_valid",label:{text:"服务器状态"},editorType:"dxSelectBox",editorOptions:{displayExpr:"name",valueExpr:"id",dataSource:y["a"].getDictonary().data.valid},validationRules:[w["a"].getRequired("请选择服务器状态!")]},{dataField:"desc",label:{text:"备注"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入备注信息!",height:100},validationRules:[]}]);this.createPopForm({title:"服务器批量维护",width:500,height:320},{items:r,formData:this.dxFormData1},{hasReset:!1},function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(a,r){var n,i,s,d,l,c,u,p,h,v;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.validateForm(a)){e.next=2;break}return e.abrupt("return");case 2:for(n=a.option("formData"),i=[],s=t.dxDataGrid1.getSelectedRowsData(),d=!0,l=!1,c=void 0,e.prev=8,u=o()(s);!(d=(p=u.next()).done);d=!0)h=p.value,i.push(h.id);e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](8),l=!0,c=e.t0;case 16:e.prev=16,e.prev=17,d||null==u.return||u.return();case 19:if(e.prev=19,!l){e.next=22;break}throw c;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.next=26,t.serverAPI.setBatUpdateState({account_token:t.token,is_valid:n.is_valid,ids:i,desc:n.desc});case 26:return v=e.sent,v.code==_["a"].OK||v.code==_["a"].isSame||v.code==_["a"].isSameSaveData?t.dxDataGrid1.refresh():t.errorCodeMsg(v.code,v.msg),e.abrupt("return",!0);case 29:case"end":return e.stop()}},e,null,[[8,12,16,24],[17,,19,23]])}));return function(t,a){return e.apply(this,arguments)}}())}else this.alert("请至少选择一条数据再进行操作!")}},{key:"onRefreshHandler",value:function(e){this.dxDataGrid1.refresh()}},{key:"getDataList",value:function(){var e=this,t=this.getDataGridPager(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(a,r,n){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.serverAPI.getListPager(a,r,n);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},t)}));return function(e,a,r){return t.apply(this,arguments)}}());this.dxDataGrid1.option({remoteOperations:!0,dataSource:t,summary:{totalItems:[{name:"online_users",column:"online_users",displayFormat:"合计: {0}",summaryType:"sum"}]}})}}]),t}(x["a"]);G=h["a"]([Object(v["a"])({components:{DxDataGrid:m["DxDataGrid"],DxForm:m["DxForm"],DxTreeView:m["DxTreeView"],server_node_error:P}})],G);var E=G,B=E,C=B,I=Object(M["a"])(C,r,n,!1,null,null,null);t["default"]=I.exports},"3ebb":function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return o});a("5f33"),a("f91a");var r,n=a("eb12"),i=a("ba94");(function(e){e[e["Year"]=0]="Year",e[e["Month"]=1]="Month",e[e["Date"]=2]="Date",e[e["Week"]=3]="Week",e[e["Hour"]=4]="Hour",e[e["Minute"]=5]="Minute",e[e["Second"]=6]="Second",e[e["Milliscond"]=7]="Milliscond"})(r||(r={}));var o=function(){function e(){Object(n["a"])(this,e)}return Object(i["a"])(e,[{key:"compareDate",value:function(e,t){}}],[{key:"parserDate",value:function(e){var t=Date.parse(e);return isNaN(t)?new Date:new Date(Date.parse(e.replace(/-/g,"/")))}},{key:"getNow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-MM-dd HH:mm:ss",t=new Date,a={"M+":t.getMonth()+1,"d+":t.getDate(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return e}},{key:"convertDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",a={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return t}},{key:"AddTime",value:function(e,t,a){var n=this.parserDate(e);switch(t){case r.Milliscond:n.setMilliseconds(n.getMilliseconds()+a);break;case r.Date:n.setDate(n.getDate()+a);break;case r.Month:n.setMonth(n.getMonth()+a);break;case r.Week:n.setDate(n.getDate()+7*a);break}return this.convertDate(n)}},{key:"TimeIntegrate",value:function(e){var t=Math.floor(e/864e5),a=e%864e5,r=Math.floor(a/36e5),n=a%36e5,i=Math.floor(n/6e4),o=n%6e4,s=Math.round(o/1e3),d="";return t>0&&(d+=" "+t+"天 "),r>0&&(d+=" "+r+"小时 "),i>0&&(d+=" "+i+"分钟 "),s>0&&(d+=" "+s+"秒 "),d}},{key:"TimeIntegrate2",value:function(e){var t=Math.floor(e/864e5),a=e%864e5,r=Math.floor(a/36e5),n=a%36e5,i=Math.floor(n/6e4),o=n%6e4,s=(Math.round(o/1e3),"");return t>0&&(r+=24*t),r>0&&(s+=" "+r+"小时 "),i>0&&(s+=" "+i+"分钟 "),s}}]),e}()}}]);