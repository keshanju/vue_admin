(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-770ee94a"],{"0d29":function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d});n("4453");var r=n("ee95"),a=n("eb12"),i=n("ba94"),o=n("5ee8"),s=n("4e86"),u=n("5bc3"),c=n("f322"),l=function(e){function t(){return Object(a["a"])(this,t),Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"getListPager",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1&&void 0!==o[1]?o[1]:15,r=o.length>2&&void 0!==o[2]?o[2]:1,a="/staff/line?account_token="+this.token+"&size="+n+"&page="+r+t,e.next=6,this.httpGet(a);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",t="/staff/line/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/line",r=t,e.next=4,this.httpPost(n,r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/line/"+t,a=n,e.next=4,this.httpPut(r,a);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/line/"+t,r="account_token="+this.token+"&ids="+t,e.next=4,this.httpDelete(n+"?"+r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/line/"+t,r="account_token="+this.token,e.next=4,this.httpGet(n+"?"+r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getNodeServerSelected",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/line/"+t+"/node?account_token="+this.token,e.next=3,this.httpGet(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setNodeServerSelected",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/line/"+t+"/node?account_token="+this.token,a={account_token:this.token,node_ids:n},e.next=4,this.httpPostJson(r,a);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setBatUpdateLine",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/line/batch",e.next=3,this.httpPostJson(n,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(c["a"]),d=function(e){function t(){return Object(a["a"])(this,t),Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"getModel",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/line/bandwidth/sync/".concat(t,"?account_token=").concat(this.token),e.next=3,this.httpGet(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setPost",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/line/bandwidth/sync/".concat(t),e.next=3,this.httpPostJson(r,n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setPut",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/line/bandwidth/sync/".concat(t),e.next=3,this.httpPutJson(r,n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/line/bandwidth/sync/".concat(t,"?account_token=").concat(this.token),e.next=3,this.httpDelete(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(c["a"])},d492:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("DxDataGrid",{ref:e.dxDataGridKey1}),n("line_limit_edit",{ref:"line_limit_edit"})],1)},a=[],i=(n("b06f"),n("4453"),n("ee95")),o=n("eb12"),s=n("ba94"),u=n("5ee8"),c=n("4e86"),l=n("5bc3"),d=n("3a61"),p=n("b2e6"),h=n("74a9"),f=n("a60a"),v=n.n(f),m=n("1639"),b=n("0d29"),w=n("4c5d"),g=n("4b0b"),x=n("9b13"),k=n("f322"),y=function(e){function t(){return Object(o["a"])(this,t),Object(u["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"getListPager",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"",r=s.length>2&&void 0!==s[2]?s[2]:15,a=s.length>3&&void 0!==s[3]?s[3]:1,i="/staff/line/"+t+"/bind?account_token="+this.token+"&size="+r+"&page="+a+n,e.next=6,this.httpGet(i);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/line/"+t+"/bind",a=n,e.next=4,this.httpPost(r,a);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/line/bind/"+t,a=n,e.next=4,this.httpPut(r,a);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/line/bind/"+t,r="account_token="+this.token,e.next=4,this.httpDelete(n+"?"+r);case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/line/bind/"+t,r="account_token="+this.token,e.next=4,this.httpGet(n+"?"+r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(k["a"]),_=n("87fa"),R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dx-popup",{attrs:{visible:e.options.visible,title:e.options.title,toolbarItems:e.options.toolbarItems,width:e.options.width,height:e.options.height,onHidden:e.options.onHidden},on:{"update:visible":function(t){return e.$set(e.options,"visible",t)}}},[n("dx-scroll-view",[n("dx-form",{ref:"dxForm1"})],1)],1)},O=[],D=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(u["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.options={visible:!1,title:"线路节点限速配置",toolbarItems:[],width:350,height:220,onHidden:function(){}},e._line_id=0,e}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"created",value:function(){var e=this;this.options.toolbarItems.push({location:"after",toolbar:"bottom",widget:"dxButton",options:{text:"删除配置",type:"danger",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.confirm("你确定是否删除配置,删除配置不进行速度限制!");case 2:if(n=t.sent,!n){t.next=8;break}return t.next=6,(new b["b"]).setDelete(e._line_id);case 6:r=t.sent,r.code==x["a"].OK||r.code==x["a"].isSame||r.code==x["a"].isSameSaveData?(e.options.visible=!1,e.toast(function(){},"操作信息成功.")):e.errorCodeMsg(r.code,r.msg);case 8:case"end":return t.stop()}},t)}));function n(){return t.apply(this,arguments)}return n}()}}),this.options.toolbarItems.push({location:"after",toolbar:"bottom",widget:"dxButton",options:{text:"确定保存",type:"success",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.validateForm(e.dxForm1)){t.next=2;break}return t.abrupt("return");case 2:if(n=e.dxForm1.option("formData"),n.account_token=e.token,a=new b["b"],0!=n.id){t.next=11;break}return t.next=8,a.setPost(e._line_id,n);case 8:r=t.sent,t.next=15;break;case 11:if(!(n.id>0)){t.next=15;break}return t.next=14,a.setPut(e._line_id,n);case 14:r=t.sent;case 15:r.code==x["a"].OK||r.code==x["a"].isSame||r.code==x["a"].isSameSaveData?(e.options.visible=!1,e.toast(function(){},"操作信息成功.")):e.errorCodeMsg(r.code,r.msg);case 16:case"end":return t.stop()}},t)}));function n(){return t.apply(this,arguments)}return n}()}}),this.options.toolbarItems.push({location:"after",toolbar:"bottom",widget:"dxButton",options:{text:"取消",type:"normal",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.options.visible=!1;case 1:case"end":return t.stop()}},t)}));function n(){return t.apply(this,arguments)}return n}()}})}},{key:"mounted",value:function(){this.dxForm1=this.getDxInstanceByKey("dxForm1");var e=this.createFormItems([{dataField:"max_bandwidth",label:{text:"最大带宽(KB)"},editorType:"dxNumberBox",editorOptions:{placeholder:"请输入最大带宽"},validationRules:[g["a"].getRequired("最大带宽不能为空!")]},{dataField:"min_bandwidth",label:{text:"最小带宽(KB)"},editorType:"dxNumberBox",editorOptions:{placeholder:"请输入最小带宽"},validationRules:[g["a"].getRequired("最小带宽不能为空!")]},{dataField:"total_bandwidth",label:{text:"总带宽(KB)"},editorType:"dxNumberBox",editorOptions:{placeholder:"请输入总带宽"},validationRules:[g["a"].getRequired("总带宽不能为空!")]}]);this.dxForm1.option({items:e})}},{key:"Show",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.options.visible=!0,this._line_id=t,n={id:0},e.next=5,(new b["b"]).getModel(this._line_id);case 5:r=e.sent,r.data.id>0&&(n=r.data),this.dxForm1.option({formData:n});case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(m["a"]);D=d["a"]([Object(p["a"])({components:{DxDataGrid:h["DxDataGrid"],DxForm:h["DxForm"],DxTreeView:h["DxTreeView"],DxPopup:h["DxPopup"],DxScrollView:h["DxScrollView"]}})],D);var j=D,F=j,S=n("17cc"),P=Object(S["a"])(F,R,O,!1,null,null,null),B=P.exports,C=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(u["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.dxDataGridKey1="dxDataGridKey1",e.lineAPI=new b["a"],e.dxFormData1={id:0},e.lineBindApi=new y,e.master_id=0,e}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$parent.content_title="线路管理",this.initComponents(),this.getDataList();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initComponents",value:function(){this.dxDataGrid1=this.getDxInstanceByKey(this.dxDataGridKey1);var e=[{allowFiltering:!0,allowSorting:!0,dataField:"id",caption:"编号",width:80},{allowFiltering:!0,allowSorting:!0,dataField:"title",caption:"名称",width:120},{dataField:"in_line_type",caption:"入口线路类型",width:140,cellTemplate:function(e,t){v()("<span>").append(w["a"].getDicText(w["a"].getDictonary().data.line_type,t.value)).appendTo(e)}},{dataField:"failover_line_title",caption:"备用线路",width:120},{dataField:"fault_status",caption:"线路状态",width:100,cellTemplate:function(e,t){var n=1==t.value?"red":"green";v()("<span style='color:"+n+"'>").append(w["a"].getDicText(w["a"].getDictonary().data.line_fault_status,t.value)).appendTo(e)}},{allowFiltering:!0,allowSorting:!0,dataField:"bandwidth",caption:"带宽",width:120},{dataField:"region_enter_title",caption:"线路入口",width:80},{dataField:"region_exit_title",caption:"线路出口",width:80},{dataField:"line_type",caption:"线路类型",width:140,cellTemplate:function(e,t){v()("<span>").append(w["a"].getDicText(w["a"].getDictonary().data.port_line_type,t.value)).appendTo(e)}},{dataField:"line_vip_level_title",caption:"线路等级",width:120},{dataField:"provider",caption:"提供商",width:120},{visible:!1,allowFiltering:!0,allowSorting:!0,dataField:"line_layout_code",caption:"线路布局Code",width:120},{visible:!1,dataField:"fault_desc",caption:"故障描述",width:180},{visible:!1,dataField:"fault_staff_name",caption:"故障提交人",width:80},{visible:!1,allowFiltering:!0,allowSorting:!0,dataField:"fault_time",caption:"故障时间",width:160},{visible:!1,allowFiltering:!0,allowSorting:!0,dataField:"fault_resume_time",caption:"故障恢复时间",width:160},{visible:!1,allowFiltering:!0,allowSorting:!0,dataField:"fault_start_time",caption:"故障开始时间",width:160},{visible:!1,allowFiltering:!0,allowSorting:!0,dataField:"fault_end_time",caption:"故障结束时间",width:160},{dataField:"fixed_delays",caption:"修订延迟",width:120},{visible:!1,allowFiltering:!0,allowSorting:!0,dataField:"game_server_ip",caption:"游戏区服测试IP",width:120},{visible:!1,dataField:"create_time",caption:"创建时间",width:160},{visible:!1,dataField:"create_staff_name",caption:"创建人",width:80},{fixed:!0,fixedPosition:"right",dataField:"id",alignment:"center",caption:"操作",width:260,cellTemplate:this.CellEdit}],t=this.getDataGridOption({onToolbarPreparing:this.onToolbarPreparingHandler,columns:e,onRowClick:this.onRowClickHandler});this.dxDataGrid1.option(t)}},{key:"onRowClickHandler",value:function(e){var t=this;this.dbClick(function(){t.redirect("/server/line/edit/"+e.key.id)})}},{key:"CellEdit",value:function(e,t){var n=this,r=this.getCreateLink("删除",function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(r){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.confirm("是否确定删除?");case 2:if(a=e.sent,!a){e.next=8;break}return e.next=6,n.lineAPI.setDelete(Number(t.value));case 6:i=e.sent,i.code==x["a"].OK||i.code==x["a"].isSame||i.code==x["a"].isSameSaveData?n.toast(function(){n.dxDataGrid1.refresh()}):n.errorCodeMsg(i.code,i.msg);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),a=v()("<a href='javascript:void(0)' data="+t.value+"> 子线路 </a>");a.bind("click",function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n.master_id=Number(t.value),n.master_grid=n.createPopDataList({title:"绑定子线路"},{columns:[{dataField:"id",caption:"编号",width:80},{dataField:"master_title",caption:"主线路",width:140},{dataField:"slave_title",caption:"从线路",width:140},{dataField:"key",caption:"别名",width:120},{dataField:"create_time",caption:"创建时间",width:160},{fixed:!0,fixedPosition:"right",dataField:"id",alignment:"center",caption:"操作",width:200,cellTemplate:function(e,t){var r=v()("<a href='javascript:void(0)' data='"+t.value+"'>编辑</a>");r.bind("click",function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(r){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=Number(t.value),e.next=3,n.lineBindApi.getModel(a);case 3:i=e.sent,n.editLineBindFormEdit(i.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var a=v()("<a href='javascript:void(0)' data='"+t.value+"'>删除</a>");a.bind("click",function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=Number(t.value),e.next=3,n.lineBindApi.setDelete(a);case 3:e.sent,n.master_grid.refresh();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),v()("<div>").append(r).append(" | ").append(a).appendTo(e)}}]},function(e){var t=e.toolbarOptions.items;t.push({location:"before",widget:"dxButton",options:{text:"添加",icon:"add",onClick:function(e){n.editLineBindFormEdit()}}}),t.push({location:"before",widget:"dxButton",options:{text:"刷新",icon:"refresh",onClick:function(e){n.master_grid.refresh()}}}),n.createSearchToolbars(t,n.dxDataGrid1.option("columns"),function(){n.getLineBindDataList()})}),n.getLineBindDataList();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var o=this.getCreateLink("编辑",function(e){n.redirect("/server/line/edit/"+t.value)}),s=this.getCreateLink("服务器组",function(e){n.redirect("/server/line/node/edit/"+t.value)}),u=this.getCreateLink("维护",function(e){n.redirect("/server/line/maintain/"+t.value)}),c=this.getCreateLink("限速",function(e){n.$refs["line_limit_edit"].Show(t.value)});v()("<div>").append(o).append(" | ").append(s).append(" | ").append(a).append(" | ").append(u).append(" | ").append(r).append(" | ").append(c).appendTo(e)}},{key:"getLineBindDataList",value:function(){var e=this,t=this.getDataGridPager(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(n,r,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.lineBindApi.getListPager(e.master_id,n,r,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}());this.master_grid.option({remoteOperations:!0,dataSource:t})}},{key:"editLineBindFormEdit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a=this,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{id:0,key:"tcp"},e.next=3,this.lineAPI.getList();case 3:n=e.sent,0==t.id&&(t.slave_id=n.data[0].id),r=this.createFormItems([{dataField:"slave_id",label:{text:"请选择子线路"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择子线路",dataSource:n.data,displayExpr:"title",valueExpr:"id"},validationRules:[g["a"].getRequired("子线路不能为空!")]},{dataField:"key",label:{text:"别名"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择或者输入一个别名,提示 kr,hk,tcp,download",acceptCustomValue:!0,items:["kr","hk","tcp","download"]},validationRules:[g["a"].getRequired("别名不能为空!")]}]),this.createPopForm({title:"编辑从线路",maxHeight:300,maxWidth:500},{formData:t,items:r},{},function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a.validateForm(t)){e.next=3;break}return e.abrupt("return");case 3:if(r=t.option("formData"),r.account_token=a.token,i=a.joinFormParams(r),r.id!=x["a"].zero){e.next=12;break}return e.next=9,a.lineBindApi.setAdd(a.master_id,i);case 9:o=e.sent,e.next=15;break;case 12:return e.next=14,a.lineBindApi.setUpdate(r.id,i);case 14:o=e.sent;case 15:if(o.code==x["a"].OK||o.code==x["a"].isSame||o.code==x["a"].isSameSaveData){e.next=20;break}return a.errorCodeMsg(o.code,o.msg),e.abrupt("return",!1);case 20:a.master_grid.refresh();case 21:e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](0),a.error(e.t0);case 26:return e.abrupt("return",!0);case 27:case"end":return e.stop()}},e,null,[[0,23]])}));return function(t,n){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onToolbarPreparingHandler",value:function(e){var t=this,n=(e.component,e.toolbarOptions.items);n.push({location:"before",widget:"dxButton",options:{text:"添加",icon:"add",onClick:this.onAddHandler}}),n.push({location:"before",widget:"dxButton",options:{text:"刷新",icon:"refresh",onClick:this.onRefreshHandler}}),this.createSearchToolbars(n,this.dxDataGrid1.option("columns"),function(){t.getDataList()},"title",_["a"].contain)}},{key:"onRefreshHandler",value:function(e){this.dxDataGrid1.refresh()}},{key:"onAddHandler",value:function(e){this.redirect("/server/line/edit")}},{key:"getDataList",value:function(){var e=this,t=this.getDataGridPager(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(n,r,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.lineAPI.getListPager(n,r,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}());this.dxDataGrid1.option({remoteOperations:!0,dataSource:t})}}]),t}(m["a"]);C=d["a"]([Object(p["a"])({components:{DxDataGrid:h["DxDataGrid"],DxForm:h["DxForm"],line_limit_edit:B}})],C);var G=C,L=G,T=L,A=Object(S["a"])(T,r,a,!1,null,null,null);t["default"]=A.exports}}]);