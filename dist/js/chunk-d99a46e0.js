(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d99a46e0","chunk-7bb24280"],{1787:function(e,t,r){"use strict";var n=r("4f1d"),a=r("6b32"),i=r("5f84"),o=r("7182"),c=r("ed52"),s=Object.assign;e.exports=!s||r("7f67")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=s({},e)[r]||Object.keys(s({},t)).join("")!=n})?function(e,t){var r=o(e),s=arguments.length,u=1,d=a.f,l=i.f;while(s>u){var p,h=c(arguments[u++]),f=d?n(h).concat(d(h)):n(h),m=f.length,b=0;while(m>b)l.call(h,p=f[b++])&&(r[p]=h[p])}return r}:s},"208e":function(e,t,r){e.exports=r("8b64")},3787:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r("4453");var n=r("ee95"),a=r("eb12"),i=r("ba94"),o=r("5ee8"),c=r("4e86"),s=r("5bc3"),u=r("f322"),d=function(e){function t(){return Object(a["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(s["a"])(t,e),Object(i["a"])(t,[{key:"UserListPager",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",r=o.length>1&&void 0!==o[1]?o[1]:15,n=o.length>2&&void 0!==o[2]?o[2]:1,a="/staff/member?account_token="+this.token+"&size="+r+"&page="+n+t,e.next=6,this.httpGet(a);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:"",t="/staff/group/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"userAdd",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member",e.next=3,this.httpPost(r,t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"userUpdate",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/member/"+t,e.next=3,this.httpPut(n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"userRePasswd",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/member/"+t+"/password",e.next=3,this.httpPut(n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getUserModel",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/"+t+"?account_token="+this.token,e.next=3,this.httpGet(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"userUpdatePause",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r,n){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/member/branch/"+t+"/pause/"+r,e.next=3,this.httpPostJson(a,n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}},e,this)}));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/member/"+t,a="account_token=".concat(this.token,"&delete_explain=").concat(r),e.next=4,this.httpDelete(n+"?"+a);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getUserRefListPager",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,i,o,c=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return c.length>2&&void 0!==c[2]?c[2]:"",n=c.length>3&&void 0!==c[3]?c[3]:15,a=c.length>4&&void 0!==c[4]?c[4]:1,i="/staff/member/refer?account_token="+this.token+"&size="+n+"&page="+a+"&member_id=".concat(t,"&refer_member_id=").concat(r),e.next=7,this.httpGet(i);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getUserOpLogsListPager",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,i,o,c,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:"",a=s.length>3&&void 0!==s[3]?s[3]:15,i=s.length>4&&void 0!==s[4]?s[4]:1,o="/staff/member/".concat(t,"/operate/log/").concat(r,"?account_token=").concat(this.token,"&page=").concat(i,"&size=").concat(a).concat(n),e.next=6,this.httpGet(o);case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()}]),t}(u["a"])},6896:function(e,t,r){var n=r("471d");n(n.S+n.F,"Object",{assign:r("1787")})},"8b64":function(e,t,r){r("6896"),e.exports=r("836e").Object.assign},a995:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("dxUserSearchForm",{on:{onSearch:e.onSearch}}),r("br"),r("DxDataGrid",{ref:e.dxDataGridKey1})],1)},a=[],i=(r("4453"),r("ee95")),o=(r("48fb"),r("eb12")),c=r("ba94"),s=r("5ee8"),u=r("4e86"),d=r("5bc3"),l=r("3a61"),p=r("b2e6"),h=r("a60a"),f=r.n(h),m=r("74a9"),b=r("1639"),v=r("b995"),g=r("4c5d"),_=r("84ec"),y=r("3787"),w=r("efc6"),x=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(s["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.dxFormKey1="dxForm_Key_1",e.dxDataGridKey1="dxDataGridKey1",e.userSessionAPI=new v["a"],e.db_num="1",e.mySearchFormModel={type:0,title:""},e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"mounted",value:function(){this.$parent.content_title="用户事务",this.initComponent()}},{key:"initComponent",value:function(){this.dxDataGrid1=this.getDxInstanceByKey(this.dxDataGridKey1);var e=[{dataField:"id",caption:"编号",width:80},{allowFiltering:!0,allowSorting:!0,dataField:"user_mobile_num",caption:"手机号",width:150,cellTemplate:function(e,t){var r=f()("<span>");t.value&&""!=t.value.toString()&&t.data.country_code&&""!=t.data.country_code.toString()&&r.append("(+"+t.data.country_code+")"),r.append(t.value),r.appendTo(e)}},{dataField:"user_mail",caption:"邮箱",width:150},{dataField:"user_name",caption:"账号",width:100},{dataField:"user_nickname",caption:"昵称",width:100},{allowFiltering:!0,allowSorting:!0,dataField:"server_ip",caption:"服务器",width:180},{allowFiltering:!0,allowSorting:!0,dataField:"line_title",caption:"线路",width:180},{allowFiltering:!0,allowSorting:!0,dataField:"node_title",caption:"节点",width:180},{dataField:"game_title",caption:"游戏名",width:180},{dataField:"hardware_id",caption:"硬件id",width:180},{dataField:"user_login_sequence",caption:"用户登录序列",width:160},{dataField:"login_time",caption:"最后登录",width:160},{dataField:"lan_ip",caption:"私网IP",width:120},{dataField:"wan_ip",caption:"公网ip",width:120},{dataField:"rad_session",caption:"VPN控制表",width:120},{dataField:"recv_bytes",caption:"接收(KB)",width:100},{dataField:"send_bytes",caption:"发送(KB)",width:100},{dataField:"create_time",caption:"创建时间",width:160},{dataField:"heart_beat_time",caption:"心跳时间",width:160},{dataField:"logout_type",caption:"强制退出类型",width:120,cellTemplate:function(e,t){f()("<span>").append(g["a"].getDicText(g["a"].getDictonary().data.client_logout_type,t.value)).appendTo(e)}},{dataField:"is_logout",caption:"是否强制退出",width:120,cellTemplate:function(e,t){var r=0==t.value?"red":"green";f()("<span style='color:"+r+"'>").append(g["a"].getDicText(g["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"force_logout_reason",caption:"强制退出原因",width:180},{dataField:"login_device_type",caption:"登录设备类型",width:120,cellTemplate:function(e,t){f()("<span>").append(g["a"].getDicText(g["a"].getDictonary().data.app_platform_type,t.value)).appendTo(e)}},{dataField:"client_version",caption:"客户端版本号",width:120},{dataField:"os_type",caption:"操作系统类型",width:120,cellTemplate:function(e,t){f()("<span>").append(g["a"].getDicText(g["a"].getDictonary().data.client_os_type,t.value)).appendTo(e)}},{dataField:"device_info",caption:"设备信息",width:120},{dataField:"os_version",caption:"操作系统版本",width:120},{dataField:"auth_type",caption:"认证类型",cellTemplate:function(e,t){f()("<span>").append(g["a"].getDicText(g["a"].getDictonary().data.billing_type,t.value)).appendTo(e)},width:120},{dataField:"logout_time",caption:"退出时间",width:160},{dataField:"expire_time",caption:"到期时间",width:160},{dataField:"dns",caption:"dns",width:160},{dataField:"compatible_mode",caption:"兼容模式",width:100,cellTemplate:function(e,t){f()("<span>").append(g["a"].getDicText(g["a"].getDictonary().data.flag,t.value)).appendTo(e)}},{dataField:"current_signal",caption:"当前信号",width:100},{dataField:"packet_loss_rate",caption:"丢包率",width:100},{dataField:"id",alignment:"center",fixed:!0,fixedPosition:"right",caption:_["a"].Operate,width:200,cellTemplate:this.cellEdit}],t=this.getDataGridOption({onToolbarPreparing:this.onToolbarPreparingHandler,columns:e});this.dxDataGrid1.option(t)}},{key:"onSearch",value:function(e,t,r){this.db_num=r,this.setSearchKeywords("&search=user_id__equal__"+t),this.getUserSessionList()}},{key:"orderSearchHandler",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(this.dxDataGrid1),this.validateForm(this.dxSearchForm1)){e.next=3;break}return e.abrupt("return");case 3:t=this.mySearchFormModel.type,r=this.mySearchFormModel.title,n="",e.t0=t,e.next=0===e.t0?9:1===e.t0?11:2===e.t0?13:15;break;case 9:return n="&search=mobile_num__equal__"+r,e.abrupt("break",15);case 11:return n="&search=user_name__equal__"+r,e.abrupt("break",15);case 13:return n="&search=mail__equal__"+r,e.abrupt("break",15);case 15:return a=new y["a"],e.next=18,a.UserListPager(n);case 18:if(i=e.sent,!(null==i.data||null==i.data.list||0==i.data.list.length||i.data.list.length>1)){e.next=22;break}return this.alert("没有查询到用户信息"),e.abrupt("return");case 22:o=i.data.list[0],this.db_num=o.database_num.toString(),this.setSearchKeywords("&search=user_id__equal__"+o.id),this.getUserSessionList();case 26:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onRowClickHandler",value:function(e){var t=this;this.dbClick(function(){t.redirect(""+e.key.id)})}},{key:"cellEdit",value:function(e,t){var r=this,n=this.getCreateLink("强制下线",function(e){var n=t.key.user_id,a=t.value,i=t.key.logout_type;1!=i?r.redirect("/user/"+r.db_num+"/session/force_logout/"+n+"/"+a):r.alert("用户已经强制退出了!")});f()("<div>").append(n).appendTo(e)}},{key:"getUserSessionList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.getDataGridPager(function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n,a){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.userSessionAPI.UserSessionListPager(r.db_num,t,n,a);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}()),this.dxDataGrid1.option({remoteOperations:!0,dataSource:t});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onToolbarPreparingHandler",value:function(e){e.component;var t=e.toolbarOptions.items;t.push({location:"before",widget:"dxButton",options:{icon:"refresh",text:"刷新",onClick:this.onRefreshHandler}})}},{key:"onRefreshHandler",value:function(e){this.dxDataGrid1.refresh()}}]),t}(b["a"]);x=l["a"]([Object(p["a"])({components:{DxDataGrid:m["DxDataGrid"],DxForm:m["DxForm"],DxTreeView:m["DxTreeView"],dxUserSearchForm:w["a"]}})],x);var k=x,F=k,S=F,O=r("17cc"),j=Object(O["a"])(S,n,a,!1,null,null,null);t["default"]=j.exports},b995:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r("4453");var n=r("ee95"),a=r("eb12"),i=r("ba94"),o=r("5ee8"),c=r("4e86"),s=r("5bc3"),u=r("f322"),d=function(e){function t(){return Object(a["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(s["a"])(t,e),Object(i["a"])(t,[{key:"UserSessionListPager",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,i,o,c=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"1",r=c.length>1&&void 0!==c[1]?c[1]:"",n=c.length>2&&void 0!==c[2]?c[2]:15,a=c.length>3&&void 0!==c[3]?c[3]:1,i="/staff/member/session?database_num="+t+"&account_token="+this.token+"&size="+n+"&page="+a+r,e.next=7,this.httpGet(i);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"userSessionAdd",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/session",e.next=3,this.httpPost(r,t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"userSessionUpdate",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/member/session/"+t,e.next=3,this.httpPut(n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getUserSessionModel",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/member/session/"+t+"?account_token="+this.token,e.next=3,this.httpGet(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"userSessionUpdateForce",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="/staff/member/session/down",e.next=3,this.httpPostJson(n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()}]),t}(u["a"])},efc6:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("DxForm",{ref:"dxSearchFormKey1"})],1)},a=[],i=(r("3a23"),r("612f"),r("48fb"),r("4453"),r("ee95")),o=r("208e"),c=r.n(o),s=r("eb12"),u=r("ba94"),d=r("5ee8"),l=r("4e86"),p=r("5bc3"),h=r("3a61"),f=r("b2e6"),m=r("1639"),b=r("4b0b"),v=r("3787"),g=r("4c5d"),_=r("f042"),y=r.n(_),w=r("74a9"),x=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(d["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.options={is_search_user:!1},e.mySearchFormModel={search_type:0,search_country_code:86,search_keyword:""},e}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"isEmptyObject",value:function(e){for(var t in e)return!1;return!0}},{key:"mounted",value:function(){this.options.is_search_user=!!this.is_search_user&&this.is_search_user;var e=0;e=null==this.col_count?12:0,c()(this.options,{col_count:e}),this.initControls()}},{key:"initControls",value:function(){var e=this;this.dxSearchForm1=this.getDxInstanceByKey("dxSearchFormKey1"),this.dxSearchForm1.option({formData:this.mySearchFormModel,colCount:this.options.col_count,items:[{colSpan:2,label:{text:"搜索类型"},dataField:"search_type",editorType:"dxSelectBox",editorOptions:{placeholder:"请选择搜索类型",displayExpr:"text",valueExpr:"id",dataSource:[{text:"手机号",id:0},{text:"账号",id:1},{text:"邮箱",id:2}],value:0,onValueChanged:function(t){var r=t.value,n=e.dxSearchForm1.getEditor("search_country_code");0==r?n.option({disabled:!1}):n.option({disabled:!0})}},validationRules:[b["a"].getRequired("搜索类型不能为空!")]},{colSpan:2,label:{text:"国家区号"},dataField:"search_country_code",editorType:"dxSelectBox",editorOptions:{searchEnabled:!0,placeholder:"请选择国家区号查询!",dataSource:g["a"].getCountryCode(),displayExpr:"id",valueExpr:"id"},validationRules:[b["a"].getRequired("国家区号不能为空!")]},{colSpan:3,label:{text:"关键词"},dataField:"search_keyword",editorType:"dxTextBox",editorOptions:{placeholder:"请根据类型输入关键词进行查询!精确查询数据."},validationRules:[b["a"].getRequired("关键词不能为空!")]},{colSpan:2,itemType:"button",horizontalAlignment:"left",buttonOptions:{text:"搜索",icon:"search",type:"success",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var r,n,a,i,o,c,s,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.validateForm(e.dxSearchForm1)){t.next=2;break}return t.abrupt("return");case 2:if(r=[],0==e.mySearchFormModel.search_type?(r.push({name:"mobile_num",filter:"equal",keyword:e.mySearchFormModel.search_keyword}),r.push({name:"country_code",filter:"equal",keyword:e.mySearchFormModel.search_country_code.toString()})):1==e.mySearchFormModel.search_type?r.push({name:"user_name",filter:"equal",keyword:e.mySearchFormModel.search_keyword}):2==e.mySearchFormModel.search_type&&r.push({name:"mail",filter:"equal",keyword:e.mySearchFormModel.search_keyword}),e.options.is_search_user){t.next=21;break}return n=[],y.a.from(r).forEach(function(e){n.push("".concat(e.name,"__").concat(e.filter,"__").concat(e.keyword))}),a="&search="+n.join("|"),i=new v["a"],t.next=11,i.UserListPager(a);case 11:if(o=t.sent,null!=o.data&&null!=o.data.list&&0!=o.data.list.length){t.next=15;break}return e.alert("没有查询到用户信息"),t.abrupt("return");case 15:c=o.data.list[0],s=c.id,u=c.database_num.toString(),e.$emit("onSearch",r,s,u),t.next=22;break;case 21:e.$emit("onSearch",r,0,0);case 22:case"end":return t.stop()}},t)}));function r(){return t.apply(this,arguments)}return r}()}}]})}}]),t}(m["a"]);h["a"]([Object(f["b"])()],x.prototype,"is_search_user",void 0),h["a"]([Object(f["b"])()],x.prototype,"col_count",void 0),x=h["a"]([Object(f["a"])({components:{DxDataGrid:w["DxDataGrid"],DxForm:w["DxForm"],DxTreeView:w["DxTreeView"],DxPopup:w["DxPopup"],DxTextArea:w["DxTextArea"]}})],x);var k=x,F=k,S=r("17cc"),O=Object(S["a"])(F,n,a,!1,null,null,null);t["a"]=O.exports}}]);