(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef5a3052"],{"10d8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("DxForm",{ref:e.dxFormKey1})],1)},n=[],i=(r("4453"),r("ee95")),o=r("eb12"),s=r("ba94"),u=r("5ee8"),c=r("4e86"),d=r("5bc3"),l=r("3a61"),p=r("b2e6"),h=r("74a9"),m=r("a60a"),x=r.n(m),g=r("1639"),f=r("efee"),v=(r("3656"),r("4c5d")),b=r("4b0b"),y=r("9b13"),_=r("71e4"),w=r("3ebb"),k=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(u["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.dxFormKey1="dxFormKey1",e.dxFormData1={id:0,class_type:0,support_type:1,publish_status:1,include_region_codes:"",include_region_codes_arr:[],exclude_region_codes:"",exclude_region_codes_arr:[],publish_time:w["b"].getNow(),is_top:0,is_client_popup:0},e.dxFormDataReset1={},e.newsAPI=new f["a"],e}return Object(d["a"])(t,e),Object(s["a"])(t,[{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$parent.content_title="文章编辑",!(this.ID>y["a"].zero)){e.next=6;break}return e.next=4,this.newsAPI.getModel(this.ID);case 4:t=e.sent,this.dxFormData1=t.data;case 6:this.initComponents(),this.ID>y["a"].zero&&(this.dxFormData1.include_region_codes_arr=this.getRegionCode(this.dxFormData1.include_region_codes),this.dxFormData1.exclude_region_codes_arr=this.getRegionCode(this.dxFormData1.exclude_region_codes),this.iImageNode.attr("src",this.uploadApi.getUploadHttp+this.dxFormData1.image_url),this.dxForm1.option({formData:this.dxFormData1})),this.dxFormDataReset1=x.a.extend(!0,{},this.dxFormData1);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initComponents",value:function(){var e=this;this.dxForm1=this.getDxInstanceByKey(this.dxFormKey1);var t=[{itemType:"group",items:[{dataField:"title",label:{text:"标题"},editorOptions:{placeholder:"请输入标题"},validationRules:[b["a"].getRequired("标题不能为空!")]},{dataField:"seo_keywords",label:{text:"SEO关键词"},editorOptions:{placeholder:"请输入SEO关键词"}},{dataField:"seo_desc",label:{text:"SEO描述信息"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入SEO描述信息",height:120}},{dataField:"class_type",label:{text:"类别"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择分类类别",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.class_type},validationRules:[b["a"].getRequired("分类类别不能为空!")]},{dataField:"label",label:{text:"标签关键词列表"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入标签关键词,多个请用英文逗号分开.",height:120}},{dataField:"summary",label:{text:"摘要"},editorType:"dxTextArea",editorOptions:{placeholder:"请输入摘要信息"},validationRules:[]},this.createUploadFileFormItem(function(t){e.iImageNode=t},{dataField:"image_url",label:{text:"公告图片"},validationRules:[]},{name:"filename",uploadUrl:this.uploadApi.getUploadNormalPath("images")}),this.createUploadFileFormItem(function(t){null!=e.UE&&e.UE.execCommand("insertHtml",'<img src="'+t+'" />')},{label:{text:"上传图片"}},{name:"filename",uploadUrl:this.uploadApi.getUploadNormalPath("images")},!1),_["a"].createUEEditor({dataField:"content",label:{text:"详细"},editorOptions:{placeholder:"请输入详细内容"}},function(t){e.UE=t}),{dataField:"tag",label:{text:"引用标记"},editorOptions:{placeholder:"请输入引用标记"},validationRules:[]},{dataField:"hits",label:{text:"点击次数"},editorType:"dxNumberBox",editorOptions:{min:0,value:0},validationRules:[b["a"].getRequired("点击次数不能为空!")]},{dataField:"support_type",label:{text:"支持类型"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择支持类型",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.support_type},validationRules:[b["a"].getRequired("支持类型不能为空!")]},{dataField:"publish_status",label:{text:"发布状态"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择发布状态",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.publish_status},validationRules:[b["a"].getRequired("发布状态不能为空!")]},{dataField:"is_top",label:{text:"是否置顶"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择置顶状态",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.flag},validationRules:[b["a"].getRequired("置顶状态不能为空!")]},{dataField:"is_client_popup",label:{text:"是否弹窗"},editorType:"dxSelectBox",editorOptions:{placeholder:"请选择弹窗状态",displayExpr:"name",valueExpr:"id",dataSource:v["a"].getDictonary().data.flag},validationRules:[b["a"].getRequired("置顶弹窗不能为空!")]},{dataField:"publish_time",label:{text:"发布时间"},editorType:"dxDateBox",editorOptions:{placeholder:"请输入发布时间",type:"datetime",displayFormat:"yyyy-MM-dd HH:mm:ss",dateSerializationFormat:"yyyy-MM-dd HH:mm:ss"},validationRules:[b["a"].getRequired("发布时间不能为空!")]},{dataField:"expiry_time",label:{text:"过期时间"},editorType:"dxDateBox",editorOptions:{placeholder:"请输入过期时间",type:"datetime",displayFormat:"yyyy-MM-dd HH:mm:ss",dateSerializationFormat:"yyyy-MM-dd HH:mm:ss",showClearButton:!0},validationRules:[]},{dataField:"include_region_codes_arr",label:{text:"文章包含地区"},editorType:"dxTagBox",editorOptions:{placeholder:"请选择包含地区.",displayExpr:"name",valueExpr:"id",showSelectionControls:!0,applyValueMode:"useButtons",dataSource:v["a"].getDictonary().data.region_code,onValueChanged:function(t){var r=t.value;r&&r.length>0?e.dxForm1.getEditor("exclude_region_codes_arr").option({disabled:!0}):e.dxForm1.getEditor("exclude_region_codes_arr").option({disabled:!1})}}},{dataField:"exclude_region_codes_arr",label:{text:"文章排除地区"},editorType:"dxTagBox",editorOptions:{placeholder:"请选择排除地区.",displayExpr:"name",valueExpr:"id",showSelectionControls:!0,applyValueMode:"useButtons",dataSource:v["a"].getDictonary().data.region_code,onValueChanged:function(t){var r=t.value;r&&r.length>0?e.dxForm1.getEditor("include_region_codes_arr").option({disabled:!0}):e.dxForm1.getEditor("include_region_codes_arr").option({disabled:!1})}}}]},{itemType:"group",colCount:3,items:[{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:this.ID>y["a"].zero?"更新":"添加",type:"success",useSubmitBehavior:!0,onClick:this.onClickDoHandler}},{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:"重置",type:"normal",onClick:this.onResetHandler}},{itemType:"button",horizontalAlignment:"center",buttonOptions:{text:"返回",type:"normal",onClick:this.onClickBackHandler}}]}],r={formData:this.dxFormData1,items:t,width:1200,validationGroup:"customerData"};this.dxForm1.option(r)}},{key:"onResetHandler",value:function(e){this.dxFormData1=x.a.extend(!0,{},this.dxFormDataReset1),this.dxForm1.option("formData",this.dxFormData1)}},{key:"onClickDoHandler",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.component,e.prev=1,this.validateForm(this.dxForm1)){e.next=4;break}return e.abrupt("return");case 4:if(r.option({disabled:!0}),this.dxFormData1.account_token=this.token,this.dxFormData1.include_region_codes=this.dxFormData1.include_region_codes_arr.join(","),this.dxFormData1.exclude_region_codes=this.dxFormData1.exclude_region_codes_arr.join(","),a=this.joinFormParams(this.dxFormData1),this.dxFormData1.include_region_codes&&""!=this.dxFormData1.include_region_codes?a+="&exclude_region_codes=":this.dxFormData1.exclude_region_codes&&""!=this.dxFormData1.exclude_region_codes?a+="&include_region_codes=":a+="&include_region_codes=&exclude_region_codes=",this.dxFormData1.id!=y["a"].zero){e.next=16;break}return e.next=13,this.newsAPI.setAdd(a);case 13:n=e.sent,e.next=19;break;case 16:return e.next=18,this.newsAPI.setUpdate(this.ID,a);case 18:n=e.sent;case 19:n.code==y["a"].OK||n.code==y["a"].isSame||n.code==y["a"].isSameSaveData?this.toast(function(){i.redirect("/sell/news/list")}):(r.option({disabled:!1}),this.errorCodeMsg(n.code,n.msg)),e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](1),r.option({disabled:!1}),this.error(e.t0);case 26:case"end":return e.stop()}},e,this,[[1,22]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onClickBackHandler",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.redirect("/sell/news/list");case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(g["a"]);k=l["a"]([Object(p["a"])({components:{DxDataGrid:h["DxDataGrid"],DxForm:h["DxForm"]}})],k);var F=k,D=F,R=D,O=r("17cc"),j=Object(O["a"])(R,a,n,!1,null,null,null);t["default"]=j.exports},efee:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r("4453");var a=r("ee95"),n=r("eb12"),i=r("ba94"),o=r("5ee8"),s=r("4e86"),u=r("5bc3"),c=r("f322"),d=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"getListPager",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",r=o.length>1&&void 0!==o[1]?o[1]:15,a=o.length>2&&void 0!==o[2]?o[2]:1,n="/staff/news?account_token="+this.token+"&size="+r+"&page="+a+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getLabelList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",r=o.length>1&&void 0!==o[1]?o[1]:15,a=o.length>2&&void 0!==o[2]?o[2]:1,n="/staff/news/label?account_token="+this.token+"&size="+r+"&page="+a+t,e.next=6,this.httpGet(n);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getLableDetail",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/news/label/"+t,a="account_token="+this.token,e.next=4,this.httpGet(r+"?"+a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdateNewsLabel",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/news/label/"+t,n=r,e.next=4,this.httpPut(a,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"setAddNewsLabel",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/news/label",a=t,e.next=4,this.httpPost(r,a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteNewsLabel",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/news/label/"+t,a="account_token="+this.token,e.next=4,this.httpDelete(r+"?"+a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:"",t="/staff/news/lists?account_token="+this.token,e.next=4,this.httpGet(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAdd",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/news",a=t,e.next=4,this.httpPost(r,a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUpdate",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="/staff/news/"+t,n=r,e.next=4,this.httpPut(a,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"setDelete",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/news/"+t,a="account_token="+this.token+"&ids="+t,e.next=4,this.httpDelete(r+"?"+a);case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModel",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/news/"+t,a="account_token="+this.token,e.next=4,this.httpGet(r+"?"+a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"createNewsJson",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",r="/staff/cms/statics/news_json_list",a="account_token="+this.token+"&class_type="+t,e.next=5,this.httpPost(r,a);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"createNewsDetails",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="/staff/cms/statics/news_info",a="account_token="+this.token+"&news_ids="+t,e.next=4,this.httpPost(r,a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"reCreateAllNewsDetails",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="/staff/queue/cms/statics/news_info",r="account_token="+this.token,e.next=4,this.httpPost(t,r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(c["a"])}}]);